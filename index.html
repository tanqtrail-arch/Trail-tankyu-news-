<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TRAILæ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹ï½œæ¢ç©¶æ•™å®¤TRAIL</title>
  <meta name="description" content="æ¢ç©¶æ•™å®¤TRAILãŒç™ºä¿¡ã™ã‚‹ä¸­å­¦å—é¨“ãƒ»æ¢ç©¶æ•™è‚²ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€‚2026å¹´å…¥è©¦é€Ÿå ±ã€æ³¨ç›®æ ¡ã‚¬ã‚¤ãƒ‰ã€ä¿è­·è€…ã®å£°ã€‚" />
  <meta property="og:title" content="TRAILæ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹ï½œæ¢ç©¶æ•™å®¤TRAIL" />
  <meta property="og:description" content="æ¢ç©¶æ•™å®¤TRAILãŒç™ºä¿¡ã™ã‚‹ä¸­å­¦å—é¨“ãƒ»æ¢ç©¶æ•™è‚²ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€‚2026å¹´å…¥è©¦é€Ÿå ±ã€æ³¨ç›®æ ¡ã‚¬ã‚¤ãƒ‰ã€ä¿è­·è€…ã®å£°ã€‚" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="TRAILæ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="TRAILæ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹ï½œæ¢ç©¶æ•™å®¤TRAIL" />
  <meta name="twitter:description" content="æ¢ç©¶æ•™å®¤TRAILãŒç™ºä¿¡ã™ã‚‹ä¸­å­¦å—é¨“ãƒ»æ¢ç©¶æ•™è‚²ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€‚" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ”</text></svg>" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
const { useState, useEffect, useRef } = React;

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// ğŸ“ è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ â€” ã“ã“ã‚’ç·¨é›†ã™ã‚Œã°è¨˜äº‹ã®è¿½åŠ ãƒ»ä¿®æ­£ãŒã§ãã¾ã™
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
//
// ã€è¨˜äº‹ã®è¿½åŠ æ–¹æ³•ã€‘
// ARTICLESé…åˆ—ã«æ–°ã—ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
// id: ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªæ•°å­—ï¼ˆé‡è¤‡ä¸å¯ï¼‰
// date: "2026å¹´2æœˆ6æ—¥" ã®ã‚ˆã†ãªå½¢å¼
// dateKey: "0206" ã®ã‚ˆã†ãªå½¢å¼ï¼ˆæ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ç”¨ï¼‰
// category: "juken" | "school" | "tankyu" | "ai" | "oyako"
// title: è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«
// summary: ä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã‚‹è¦ç´„ï¼ˆ1-2æ–‡ï¼‰
// heroEmoji: ã‚«ãƒ¼ãƒ‰ã«å¤§ããè¡¨ç¤ºã•ã‚Œã‚‹çµµæ–‡å­—
// accentColor: ã‚«ãƒ†ã‚´ãƒªè‰²ï¼ˆä¸‹ã®CATEGORY_COLORSã‚’å‚ç…§ï¼‰
// body: æœ¬æ–‡ãƒ–ãƒ­ãƒƒã‚¯ã®é…åˆ—ï¼ˆä¸‹è¨˜å‚ç…§ï¼‰
// tags: ã‚¿ã‚°ã®é…åˆ—
// tankyuPoint: ğŸ§­æ¢ç©¶ãƒã‚¤ãƒ³ãƒˆï¼ˆçœç•¥å¯ï¼‰
// aiAngle: ğŸ¤–AIæ™‚ä»£ã®è¦–ç‚¹ï¼ˆçœç•¥å¯ï¼‰
// oyakoTalk: ğŸ’¬è¦ªå­ã§è©±ãã†ï¼ˆçœç•¥å¯ï¼‰
// videoUrl: YouTubeå‹•ç”»URLï¼ˆçœç•¥å¯ãƒ»ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§è¿½åŠ å¯èƒ½ï¼‰
//
// ã€æœ¬æ–‡ãƒ–ãƒ­ãƒƒã‚¯ã®ç¨®é¡ã€‘
// { type: "text", content: "æœ¬æ–‡ãƒ†ã‚­ã‚¹ãƒˆ" }
// { type: "heading", content: "å°è¦‹å‡ºã—" }
// { type: "list", items: ["é …ç›®1", "é …ç›®2"] }
// { type: "table", title: "è¡¨ã‚¿ã‚¤ãƒˆãƒ«", headers: [...], rows: [[...], ...] }
// { type: "highlight", items: [{ school: "å­¦æ ¡å", detail: "èª¬æ˜" }] }
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

// èª­äº†æ™‚é–“ã‚’è¨ˆç®—ï¼ˆæ—¥æœ¬èª: ç´„500æ–‡å­—/åˆ†ï¼‰
function getReadingTime(article) {
  if (!article || !article.body) return 1;
  let chars = 0;
  article.body.forEach(b => {
    if (b.content) chars += b.content.length;
    if (b.items) b.items.forEach(it => { chars += typeof it === "string" ? it.length : (it.detail || "").length; });
    if (b.rows) b.rows.forEach(r => r.forEach(c => { chars += (c || "").length; }));
  });
  if (article.tankyuPoint) chars += article.tankyuPoint.length;
  if (article.oyakoTalk) chars += article.oyakoTalk.length;
  return Math.max(1, Math.round(chars / 500));
}

// OGPãƒ¡ã‚¿ã‚¿ã‚°ã‚’å‹•çš„ã«æ›´æ–°
function updateOGP(article) {
  const setMeta = (prop, content) => {
    const attr = prop.startsWith("og:") || prop.startsWith("article:") ? "property" : "name";
    let el = document.querySelector(`meta[${attr}="${prop}"]`);
    if (!el) { el = document.createElement("meta"); el.setAttribute(attr, prop); document.head.appendChild(el); }
    el.setAttribute("content", content);
  };
  if (article) {
    const label = CATEGORY_LABELS[article.category] || "";
    setMeta("og:title", `${article.title}ï½œTRAILæ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹`);
    setMeta("og:description", article.summary);
    setMeta("og:type", "article");
    setMeta("twitter:title", `${article.title}ï½œTRAILæ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹`);
    setMeta("twitter:description", article.summary);
    document.title = `${article.title}ï½œTRAILæ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹`;
  } else {
    setMeta("og:title", "TRAILæ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹ï½œæ¢ç©¶æ•™å®¤TRAIL");
    setMeta("og:description", "æ¢ç©¶æ•™å®¤TRAILãŒç™ºä¿¡ã™ã‚‹ä¸­å­¦å—é¨“ãƒ»æ¢ç©¶æ•™è‚²ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€‚2026å¹´å…¥è©¦é€Ÿå ±ã€æ³¨ç›®æ ¡ã‚¬ã‚¤ãƒ‰ã€ä¿è­·è€…ã®å£°ã€‚");
    setMeta("og:type", "website");
    setMeta("twitter:title", "TRAILæ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹ï½œæ¢ç©¶æ•™å®¤TRAIL");
    setMeta("twitter:description", "æ¢ç©¶æ•™å®¤TRAILãŒç™ºä¿¡ã™ã‚‹ä¸­å­¦å—é¨“ãƒ»æ¢ç©¶æ•™è‚²ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€‚");
    document.title = "TRAILæ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹ï½œæ¢ç©¶æ•™å®¤TRAIL";
  }
}

const SITE = {
  name: "ãƒˆãƒ¬ã‚¤ãƒ«æ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹",
  tagline: "ä¸­å­¦å—é¨“ Ã— æ¢ç©¶å­¦ç¿’ Ã— AIæ™‚ä»£ã®å­¦ã³",
  description: "æ¢ç©¶æ•™å®¤TRAILãŒå±Šã‘ã‚‹ã€è¦ªå­ã§èª­ã‚€ä¸­å­¦å—é¨“ãƒ‹ãƒ¥ãƒ¼ã‚¹",
};

const NAV_CATEGORIES = [
  { id: "all", label: "ã™ã¹ã¦", icon: "ğŸ“°" },
  { id: "juken", label: "å…¥è©¦é€Ÿå ±", icon: "ğŸ¯" },
  { id: "school", label: "å­¦æ ¡æƒ…å ±", icon: "ğŸ«" },
  { id: "tankyu", label: "æ¢ç©¶ã‚³ãƒ©ãƒ ", icon: "ğŸ”" },
  { id: "ai", label: "AIÃ—æ•™è‚²", icon: "ğŸ¤–" },
  { id: "oyako", label: "è¦ªå­ã§è€ƒãˆã‚‹", icon: "ğŸ’¬" },
];

const CATEGORY_COLORS = {
  juken: "#E8453C",
  school: "#059669",
  tankyu: "#D97706",
  ai: "#2563EB",
  oyako: "#7C3AED",
};

const CATEGORY_LABELS = {
  juken: "å…¥è©¦é€Ÿå ±",
  school: "å­¦æ ¡æƒ…å ±",
  tankyu: "æ¢ç©¶ã‚³ãƒ©ãƒ ",
  ai: "AIÃ—æ•™è‚²",
  oyako: "è¦ªå­ã§è€ƒãˆã‚‹",
};

const DATE_TABS = [
  { key: "all", label: "ã™ã¹ã¦" },
  { key: "0201", label: "2/1" },
  { key: "0202", label: "2/2" },
  { key: "0203", label: "2/3" },
  { key: "0204", label: "2/4" },
  { key: "0205", label: "2/5" },
  { key: "0206", label: "2/6" },
  { key: "0207", label: "2/7" },
  { key: "0208", label: "2/8" },
  { key: "0209", label: "2/9" },
  { key: "0210", label: "2/10" },
  { key: "0211", label: "2/11" },
  { key: "0212", label: "2/12" },
];

// â”â”â” æ¢ç©¶ãƒŠãƒ“ï¼ˆè³ªå•ãƒ„ãƒªãƒ¼ãƒ»5æŠÃ—3å›ï¼‰ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const NAVI_TREE = {
  // â•â•â• Q1: å¤§ãƒ†ãƒ¼ãƒï¼ˆ5æŠï¼‰â•â•â•
  root: {
    message: "ã“ã‚“ã«ã¡ã¯ï¼ä»Šæ—¥ã¯ã©ã‚“ãªã“ã¨ãŒæ°—ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ",
    options: [
      { label: "ğŸ¯ å—é¨“ãƒ»å…¥è©¦ã®ã“ã¨", next: "juken" },
      { label: "ğŸ« å­¦æ ¡ãˆã‚‰ã³", next: "school" },
      { label: "ğŸ” å­¦ã³æ–¹ãƒ»æ¢ç©¶", next: "learning" },
      { label: "ğŸ¤– AIã¨æ•™è‚²", next: "ai" },
      { label: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ å­è‚²ã¦ãƒ»è¦ªå­", next: "parenting" },
    ]
  },
  // â•â•â• Q2: ä¸­ãƒ†ãƒ¼ãƒï¼ˆå„5æŠï¼‰â•â•â•
  juken: {
    message: "å—é¨“ã®ã©ã‚“ãªã“ã¨ãŒæ°—ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ",
    options: [
      { label: "ğŸ“Š å¿—æœ›æ ¡ã®é¸ã³æ–¹", next: "juken_school" },
      { label: "âœï¸ ç®—æ•°ãƒ»ç†æ•°ã®å¯¾ç­–", next: "juken_math" },
      { label: "ğŸ“– å›½èªãƒ»è¨˜è¿°ãƒ»è‹±èª", next: "juken_lang" },
      { label: "ğŸ”„ ä½µé¡˜ãƒ»å‡ºé¡˜æˆ¦ç•¥", next: "juken_strategy" },
      { label: "ğŸ“ˆ å…¥è©¦ã®ãƒˆãƒ¬ãƒ³ãƒ‰", next: "juken_trend" },
    ]
  },
  school: {
    message: "å­¦æ ¡ãˆã‚‰ã³ã§æ°—ã«ãªã‚‹ã“ã¨ã¯ï¼Ÿ",
    options: [
      { label: "ğŸ“ æ³¨ç›®ã®å­¦æ ¡ãƒ»æ–°è¨­æ ¡", next: "school_new" },
      { label: "ğŸŒ ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²", next: "school_global" },
      { label: "ğŸ”¬ æ¢ç©¶ãƒ»STEAMæ•™è‚²", next: "school_steam" },
      { label: "ğŸ’° ä¸­å …æ ¡ãƒ»é¢å€’è¦‹", next: "school_mid" },
      { label: "ğŸ“ å¤§å­¦ä»˜å±ãƒ»é€²å­¦å®Ÿç¸¾", next: "school_univ" },
    ]
  },
  learning: {
    message: "å­¦ã³æ–¹ã®ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ã§ã™ã‹ï¼Ÿ",
    options: [
      { label: "ğŸ” æ¢ç©¶å­¦ç¿’ã£ã¦ä½•ï¼Ÿ", next: "learn_tankyu" },
      { label: "ğŸ§  éèªçŸ¥èƒ½åŠ›ãƒ»æ€è€ƒåŠ›", next: "learn_skill" },
      { label: "ğŸ¤² æ‰‹ã‚’å‹•ã‹ã™å­¦ã³", next: "learn_hands" },
      { label: "ğŸ  å®¶åº­ã§ã§ãã‚‹å­¦ã³", next: "learn_home" },
      { label: "ğŸ“š èª­è§£åŠ›ãƒ»è¨˜è¿°åŠ›", next: "learn_read" },
    ]
  },
  ai: {
    message: "AIÃ—æ•™è‚²ã®ã©ã‚“ãªã“ã¨ãŒæ°—ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ",
    options: [
      { label: "ğŸ« å­¦æ ¡ã®AIæ´»ç”¨", next: "ai_school" },
      { label: "ğŸ’¡ AIæ™‚ä»£ã«å¿…è¦ãªåŠ›", next: "ai_skill" },
      { label: "ğŸ“‹ æ•™è‚²æ”¿ç­–ã®å¤‰åŒ–", next: "ai_policy" },
      { label: "ğŸ’» ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ•™è‚²", next: "ai_prog" },
      { label: "ğŸ”® ã“ã‚Œã‹ã‚‰ã®æ•™è‚²", next: "ai_future" },
    ]
  },
  parenting: {
    message: "å­è‚²ã¦ã®ã©ã‚“ãªã“ã¨ãŒæ°—ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ",
    options: [
      { label: "ğŸ’¬ è¦ªå­ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³", next: "parent_comm" },
      { label: "ğŸ“š å—é¨“æœŸã®ã‚µãƒãƒ¼ãƒˆ", next: "parent_juken" },
      { label: "ğŸ¨ éŠã³ãƒ»ä½“é¨“ã®ä¾¡å€¤", next: "parent_play" },
      { label: "ğŸ§˜ ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ»å¿ƒæ§‹ãˆ", next: "parent_mental" },
      { label: "ğŸŒ± å­ã©ã‚‚ã®æˆé•·", next: "parent_growth" },
    ]
  },
  // â•â•â• Q3: å…·ä½“ãƒ†ãƒ¼ãƒï¼ˆå„5æŠâ†’è¨˜äº‹æ¤œç´¢ï¼‰â•â•â•
  // â”€â”€ å—é¨“ â†’ å¿—æœ›æ ¡ â”€â”€
  juken_school: {
    message: "å¿—æœ›æ ¡é¸ã³ã§ç‰¹ã«çŸ¥ã‚ŠãŸã„ã“ã¨ã¯ï¼Ÿ",
    options: [
      { label: "ğŸ† åå·®å€¤ã ã‘ã˜ã‚ƒãªã„é¸ã³æ–¹", next: null, tags: ["å­¦æ ¡é¸ã³", "å¿—æœ›å‹•å‘", "åå·®å€¤", "è¦‹æ¥µã‚", "å­¦æ ¡è©•ä¾¡"] },
      { label: "ğŸ‘€ é¢å€’è¦‹ã®è‰¯ã•ã§é¸ã¶", next: null, tags: ["é¢å€’è¦‹", "è¦‹æ¥µã‚", "å­¦æ ¡è©•ä¾¡", "æ•™è‚²ã®è³ª", "ä¸­å …æ ¡"] },
      { label: "ğŸ“Š å¿—æœ›å‹•å‘ãƒ»äººæ°—æ ¡", next: null, tags: ["å¿—æœ›å‹•å‘", "2026å…¥è©¦", "å€ç‡", "æ³¨ç›®æ ¡", "åå·®å€¤"] },
      { label: "ğŸ” å­¦æ ¡èª¬æ˜ä¼šã®è¦‹æ–¹", next: null, tags: ["å­¦æ ¡é¸ã³", "è¦‹æ¥µã‚", "å­¦æ ¡è©•ä¾¡", "é¢å€’è¦‹", "æ•™è‚²ã®è³ª"] },
      { label: "ğŸ¤” å…±å­¦ï¼Ÿåˆ¥å­¦ï¼Ÿ", next: null, tags: ["å…±å­¦åŒ–", "å­¦æ ¡æ”¹é©", "å­¦æ ¡é¸ã³", "æ³¨ç›®æ ¡", "æ–°è¨­æ ¡"] },
    ]
  },
  // â”€â”€ å—é¨“ â†’ ç®—æ•°ç†æ•° â”€â”€
  juken_math: {
    message: "ç®—æ•°ãƒ»ç†æ•°ç³»ã§ã©ã‚“ãªã“ã¨ãŒæ°—ã«ãªã‚‹ï¼Ÿ",
    options: [
      { label: "ğŸ“ å›³å½¢ãƒ»ç©ºé–“å•é¡Œã®å¯¾ç­–", next: null, tags: ["ç®—æ•°", "ç©ºé–“èªçŸ¥åŠ›", "ç«‹ä½“åˆ‡æ–­", "å›³å½¢å•é¡Œ", "è«–ç†çš„æ€è€ƒ"] },
      { label: "ğŸ§© ãƒ‘ã‚ºãƒ«ã§ç®—æ•°åŠ›UP", next: null, tags: ["ãƒ‘ã‚ºãƒ«", "ç®—æ•°", "è«–ç†çš„æ€è€ƒ", "ç©ºé–“èªçŸ¥åŠ›", "è€ƒãˆã‚‹åŠ›"] },
      { label: "ğŸ§ª ç†ç§‘ãƒ»STEMå…¥è©¦", next: null, tags: ["ç†ç³»", "STEM", "SSH", "é©æ€§æ¤œæŸ»", "æ¢ç©¶å‹"] },
      { label: "ğŸ’¡ æ€è€ƒåŠ›å•é¡Œã¸ã®å‚™ãˆ", next: null, tags: ["è«–ç†çš„æ€è€ƒ", "è€ƒãˆã‚‹åŠ›", "æ€è€ƒåŠ›", "é©æ€§æ¤œæŸ»", "ç®—æ•°"] },
      { label: "ğŸ”¢ è‹¦æ‰‹æ„è­˜ã®å…‹æœ", next: null, tags: ["ç®—æ•°", "è€ƒãˆã‚‹åŠ›", "ãƒ‘ã‚ºãƒ«", "ç©ºé–“èªçŸ¥åŠ›", "éèªçŸ¥èƒ½åŠ›"] },
    ]
  },
  // â”€â”€ å—é¨“ â†’ å›½èªè‹±èª â”€â”€
  juken_lang: {
    message: "å›½èªãƒ»è‹±èªã®ã©ã‚“ãªã“ã¨ãŒæ°—ã«ãªã‚‹ï¼Ÿ",
    options: [
      { label: "ğŸ“ è¨˜è¿°åŠ›ãƒ»ä½œæ–‡ã®å¯¾ç­–", next: null, tags: ["ä½œæ–‡", "è¨˜è¿°åŠ›", "å›½èª", "èª­è§£åŠ›", "è€ƒãˆã‚‹åŠ›"] },
      { label: "ğŸ“– èª­è§£åŠ›ã‚’ä¼¸ã°ã™ã«ã¯", next: null, tags: ["èª­è§£åŠ›", "å›½èª", "è¨˜è¿°åŠ›", "è€ƒãˆã‚‹åŠ›", "æ€è€ƒåŠ›"] },
      { label: "ğŸ—£ï¸ è‹±èªå…¥è©¦ã®æœ€æ–°æƒ…å ±", next: null, tags: ["è‹±èªå…¥è©¦", "è‹±èªæ•™è‚²", "ã‚°ãƒ­ãƒ¼ãƒãƒ«", "ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²", "2026å…¥è©¦"] },
      { label: "ğŸŒ è‹±èª4æŠ€èƒ½ã‚’ã©ã†é›ãˆã‚‹", next: null, tags: ["è‹±èªæ•™è‚²", "ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²", "è‹±èªå…¥è©¦", "ã‚°ãƒ­ãƒ¼ãƒãƒ«"] },
      { label: "ğŸ“° æ™‚äº‹å•é¡Œãƒ»ç¤¾ä¼šã®å¯¾ç­–", next: null, tags: ["ç¤¾ä¼š", "æ™‚äº‹å•é¡Œ", "ãƒ‹ãƒ¥ãƒ¼ã‚¹", "å…¥è©¦å•é¡Œ", "ãƒ‡ãƒ¼ã‚¿èª­è§£"] },
    ]
  },
  // â”€â”€ å—é¨“ â†’ ä½µé¡˜æˆ¦ç•¥ â”€â”€
  juken_strategy: {
    message: "ä½µé¡˜ãƒ»å‡ºé¡˜ã§ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ“‹ ä½µé¡˜æ ¡ã®çµ„ã¿æ–¹", next: null, tags: ["ä½µé¡˜", "å®‰å…¨æ ¡", "å‡ºé¡˜", "å¿—æœ›å‹•å‘", "å­¦æ ¡é¸ã³"] },
      { label: "ğŸ“Š å€ç‡ãƒ»å‡ºé¡˜çŠ¶æ³", next: null, tags: ["å€ç‡", "å‡ºé¡˜", "2026å…¥è©¦", "å¿—æœ›å‹•å‘", "å…¥è©¦å•é¡Œ"] },
      { label: "ğŸ—“ï¸ ã‚µãƒ³ãƒ‡ãƒ¼ã‚·ãƒ§ãƒƒã‚¯å¯¾ç­–", next: null, tags: ["ã‚µãƒ³ãƒ‡ãƒ¼ã‚·ãƒ§ãƒƒã‚¯", "ä½µé¡˜", "2026å…¥è©¦", "å‡ºé¡˜", "å€ç‡"] },
      { label: "ğŸ¯ å®‰å…¨æ ¡ã®é¸ã³æ–¹", next: null, tags: ["å®‰å…¨æ ¡", "ä½µé¡˜", "ä¸­å …æ ¡", "é¢å€’è¦‹", "å­¦æ ¡é¸ã³"] },
      { label: "âœ… å‡ºé¡˜ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†", next: null, tags: ["å‡ºé¡˜", "ä½µé¡˜", "2026å…¥è©¦", "å€ç‡", "å®‰å…¨æ ¡"] },
    ]
  },
  // â”€â”€ å—é¨“ â†’ ãƒˆãƒ¬ãƒ³ãƒ‰ â”€â”€
  juken_trend: {
    message: "å…¥è©¦ãƒˆãƒ¬ãƒ³ãƒ‰ã§ã©ã‚“ãªã“ã¨ãŒæ°—ã«ãªã‚‹ï¼Ÿ",
    options: [
      { label: "ğŸ“ˆ 2026å¹´å…¥è©¦ã®å‚¾å‘", next: null, tags: ["2026å…¥è©¦", "å¿—æœ›å‹•å‘", "å€ç‡", "å…¥è©¦å•é¡Œ", "æ³¨ç›®æ ¡"] },
      { label: "ğŸ†• æ–°ã—ã„å…¥è©¦å½¢å¼", next: null, tags: ["é©æ€§æ¤œæŸ»", "æ¢ç©¶å‹", "è‹±èªå…¥è©¦", "2026å…¥è©¦", "å…¥è©¦å•é¡Œ"] },
      { label: "ğŸ« æ³¨ç›®æ ¡ã®å‹•ã", next: null, tags: ["æ³¨ç›®æ ¡", "æ–°è¨­æ ¡", "å­¦æ ¡æ”¹é©", "å…±å­¦åŒ–", "2026å…¥è©¦"] },
      { label: "ğŸŒ ã‚°ãƒ­ãƒ¼ãƒãƒ«å…¥è©¦", next: null, tags: ["è‹±èªå…¥è©¦", "ã‚°ãƒ­ãƒ¼ãƒãƒ«", "ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²", "ç•™å­¦ã‚³ãƒ¼ã‚¹", "2026å…¥è©¦"] },
      { label: "ğŸ“Š ãƒ‡ãƒ¼ã‚¿ã§è¦‹ã‚‹å…¥è©¦", next: null, tags: ["ãƒ‡ãƒ¼ã‚¿èª­è§£", "å€ç‡", "å¿—æœ›å‹•å‘", "åå·®å€¤", "2026å…¥è©¦"] },
    ]
  },
  // â”€â”€ å­¦æ ¡ â†’ æ³¨ç›®æ ¡ â”€â”€
  school_new: {
    message: "æ³¨ç›®æ ¡ã®ã©ã‚“ãªæƒ…å ±ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ†• æ–°è¨­ãƒ»æ”¹é©æ ¡", next: null, tags: ["æ–°è¨­æ ¡", "å­¦æ ¡æ”¹é©", "å…±å­¦åŒ–", "æ³¨ç›®æ ¡", "2026å…¥è©¦"] },
      { label: "ğŸ“ è©±é¡Œã®å­¦æ ¡ã‚’çŸ¥ã‚ŠãŸã„", next: null, tags: ["æ³¨ç›®æ ¡", "å­¦æ ¡æ”¹é©", "æ–°è¨­æ ¡", "å¿—æœ›å‹•å‘", "2026å…¥è©¦"] },
      { label: "ğŸ”„ å…±å­¦åŒ–ã—ãŸå­¦æ ¡", next: null, tags: ["å…±å­¦åŒ–", "å­¦æ ¡æ”¹é©", "æ³¨ç›®æ ¡", "æ–°è¨­æ ¡", "å­¦æ ¡é¸ã³"] },
      { label: "ğŸ« äººæ°—ä¸Šæ˜‡ä¸­ã®å­¦æ ¡", next: null, tags: ["æ³¨ç›®æ ¡", "å¿—æœ›å‹•å‘", "å€ç‡", "2026å…¥è©¦", "å­¦æ ¡è©•ä¾¡"] },
      { label: "ğŸ¯ ç©´å ´ã®å­¦æ ¡", next: null, tags: ["ä¸­å …æ ¡", "é¢å€’è¦‹", "æ³¨ç›®æ ¡", "å®‰å…¨æ ¡", "å­¦æ ¡é¸ã³"] },
    ]
  },
  // â”€â”€ å­¦æ ¡ â†’ ã‚°ãƒ­ãƒ¼ãƒãƒ« â”€â”€
  school_global: {
    message: "ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²ã®ã©ã‚“ãªã“ã¨ãŒæ°—ã«ãªã‚‹ï¼Ÿ",
    options: [
      { label: "âœˆï¸ ç•™å­¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒã‚ã‚‹å­¦æ ¡", next: null, tags: ["ç•™å­¦ã‚³ãƒ¼ã‚¹", "ã‚«ãƒŠãƒ€ç•™å­¦", "ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²", "ã‚°ãƒ­ãƒ¼ãƒãƒ«", "å…«é›²å­¦åœ’"] },
      { label: "ğŸ—£ï¸ è‹±èªæ•™è‚²ãŒå¼·ã„å­¦æ ¡", next: null, tags: ["è‹±èªæ•™è‚²", "ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²", "è‹±èªå…¥è©¦", "å“å·ç¿”è‹±", "ã‚°ãƒ­ãƒ¼ãƒãƒ«"] },
      { label: "ğŸŒ å›½éš›ãƒã‚«ãƒ­ãƒ¬ã‚¢ãƒ»æµ·å¤–é€²å­¦", next: null, tags: ["ã‚°ãƒ­ãƒ¼ãƒãƒ«", "ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²", "ç•™å­¦ã‚³ãƒ¼ã‚¹", "è‹±èªæ•™è‚²", "OECD"] },
      { label: "ğŸ« å…·ä½“çš„ãªå­¦æ ¡åã‚’çŸ¥ã‚ŠãŸã„", next: null, tags: ["å…«é›²å­¦åœ’", "å“å·ç¿”è‹±", "ä¸‰ç”°å›½éš›", "ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²", "ç•™å­¦ã‚³ãƒ¼ã‚¹"] },
      { label: "ğŸ’¡ ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²ã®åŠ¹æœ", next: null, tags: ["ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²", "è‹±èªæ•™è‚²", "ã‚°ãƒ­ãƒ¼ãƒãƒ«", "éèªçŸ¥èƒ½åŠ›", "è€ƒãˆã‚‹åŠ›"] },
    ]
  },
  // â”€â”€ å­¦æ ¡ â†’ STEAM â”€â”€
  school_steam: {
    message: "æ¢ç©¶ãƒ»STEAMæ•™è‚²ã®ã©ã‚“ãªã“ã¨ãŒæ°—ã«ãªã‚‹ï¼Ÿ",
    options: [
      { label: "ğŸ”¬ STEAMæ•™è‚²ã«å¼·ã„å­¦æ ¡", next: null, tags: ["STEAM", "STEAMæ•™è‚²", "æ¢ç©¶å‹", "è–å­¦é™¢", "ãƒ‰ãƒ«ãƒˆãƒ³"] },
      { label: "ğŸ” æ¢ç©¶å­¦ç¿’ãŒå……å®Ÿã—ãŸå­¦æ ¡", next: null, tags: ["æ¢ç©¶", "æ¢ç©¶å­¦ç¿’", "PBL", "æ¢ç©¶å‹", "ä¸‰ç”°å›½éš›"] },
      { label: "ğŸ§ª SSHãƒ»ç†æ•°æ•™è‚²", next: null, tags: ["SSH", "STEM", "ç†ç³»", "STEAMæ•™è‚²", "æ¢ç©¶å‹"] },
      { label: "ğŸ« å…·ä½“çš„ãªå­¦æ ¡åã‚’çŸ¥ã‚ŠãŸã„", next: null, tags: ["è–å­¦é™¢", "ãƒ‰ãƒ«ãƒˆãƒ³", "ä¸‰ç”°å›½éš›", "STEAMæ•™è‚²", "æ¢ç©¶å‹"] },
      { label: "ğŸ’¡ æ¢ç©¶å‹å…¥è©¦ã£ã¦ä½•ï¼Ÿ", next: null, tags: ["æ¢ç©¶å‹", "é©æ€§æ¤œæŸ»", "æ¢ç©¶å­¦ç¿’", "PBL", "å…¥è©¦å•é¡Œ"] },
    ]
  },
  // â”€â”€ å­¦æ ¡ â†’ ä¸­å …æ ¡ â”€â”€
  school_mid: {
    message: "ä¸­å …æ ¡ãƒ»é¢å€’è¦‹ã®ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ¤ é¢å€’è¦‹ãŒè‰¯ã„å­¦æ ¡", next: null, tags: ["é¢å€’è¦‹", "è¦‹æ¥µã‚", "å­¦æ ¡è©•ä¾¡", "æ•™è‚²ã®è³ª", "ä¸­å …æ ¡"] },
      { label: "ğŸ“Š ä¸­å …æ ¡ã®è¦‹æ¥µã‚æ–¹", next: null, tags: ["ä¸­å …æ ¡", "è¦‹æ¥µã‚", "å­¦æ ¡è©•ä¾¡", "é¢å€’è¦‹", "æ•™è‚²ã®è³ª"] },
      { label: "ğŸ¯ åå·®å€¤50å‰å¾Œã®ãŠã™ã™ã‚", next: null, tags: ["ä¸­å …æ ¡", "é¢å€’è¦‹", "å®‰å…¨æ ¡", "å­¦æ ¡é¸ã³", "åå·®å€¤"] },
      { label: "ğŸ‘€ æ•™è‚²ã®è³ªã‚’è¦‹æŠœãã«ã¯", next: null, tags: ["æ•™è‚²ã®è³ª", "å­¦æ ¡è©•ä¾¡", "è¦‹æ¥µã‚", "é¢å€’è¦‹", "å­¦æ ¡é¸ã³"] },
      { label: "ğŸ’¡ ä¸­å …æ ¡ãªã‚‰ã§ã¯ã®é­…åŠ›", next: null, tags: ["ä¸­å …æ ¡", "é¢å€’è¦‹", "æ•™è‚²ã®è³ª", "éèªçŸ¥èƒ½åŠ›", "æ¢ç©¶å­¦ç¿’"] },
    ]
  },
  // â”€â”€ å­¦æ ¡ â†’ å¤§å­¦ä»˜å± â”€â”€
  school_univ: {
    message: "å¤§å­¦ä»˜å±ãƒ»é€²å­¦ã§ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ“ å¤§å­¦ä»˜å±æ ¡ã®ç‰¹å¾´", next: null, tags: ["å¤§å­¦ä»˜å±æ ¡", "å­¦æ ¡é¸ã³", "å­¦æ ¡è©•ä¾¡", "æ•™è‚²ã®è³ª", "é¢å€’è¦‹"] },
      { label: "ğŸ“Š é€²å­¦å®Ÿç¸¾ã®è¦‹æ–¹", next: null, tags: ["å­¦æ ¡è©•ä¾¡", "åå·®å€¤", "å¿—æœ›å‹•å‘", "å¤§å­¦ä»˜å±æ ¡", "æ•™è‚²ã®è³ª"] },
      { label: "ğŸ¤” ä»˜å±ã‹é€²å­¦æ ¡ã‹", next: null, tags: ["å¤§å­¦ä»˜å±æ ¡", "å­¦æ ¡é¸ã³", "è¦‹æ¥µã‚", "å­¦æ ¡è©•ä¾¡", "åå·®å€¤"] },
      { label: "ğŸ” æ¢ç©¶å‹ã®ä»˜å±æ ¡", next: null, tags: ["å¤§å­¦ä»˜å±æ ¡", "æ¢ç©¶å­¦ç¿’", "æ¢ç©¶å‹", "PBL", "æ•™è‚²ã®è³ª"] },
      { label: "ğŸ’° ã‚³ã‚¹ãƒ‘ã®è‰¯ã„å­¦æ ¡", next: null, tags: ["ä¸­å …æ ¡", "å¤§å­¦ä»˜å±æ ¡", "é¢å€’è¦‹", "æ•™è‚²ã®è³ª", "å­¦æ ¡é¸ã³"] },
    ]
  },
  // â”€â”€ å­¦ã³ â†’ æ¢ç©¶ â”€â”€
  learn_tankyu: {
    message: "æ¢ç©¶å­¦ç¿’ã®ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ” æ¢ç©¶å­¦ç¿’ã®åŸºæœ¬", next: null, tags: ["æ¢ç©¶", "æ¢ç©¶çš„ãªå­¦ã³", "æ¢ç©¶å­¦ç¿’", "æ–‡ç§‘çœ", "ä¸­æ•™å¯©"] },
      { label: "ğŸ¨ ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å‹ã®æ¢ç©¶", next: null, tags: ["ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å‹æ¢ç©¶", "ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å‹", "æ¢ç©¶å­¦ç¿’", "æ¢ç©¶", "PBL"] },
      { label: "ğŸ« å­¦æ ¡ã§ã®æ¢ç©¶ã®å®Ÿæ…‹", next: null, tags: ["æ¢ç©¶å­¦ç¿’", "æ¢ç©¶å‹", "PBL", "STEAMæ•™è‚²", "æ¢ç©¶"] },
      { label: "ğŸ“‹ æ–‡ç§‘çœã®æ–¹é‡", next: null, tags: ["æ–‡ç§‘çœ", "ä¸­æ•™å¯©", "å­¦ç¿’æŒ‡å°è¦é ˜", "æ¢ç©¶çš„ãªå­¦ã³", "æ¢ç©¶å­¦ç¿’"] },
      { label: "ğŸŒ æµ·å¤–ã®æ¢ç©¶æ•™è‚²", next: null, tags: ["ãƒ•ã‚£ãƒ³ãƒ©ãƒ³ãƒ‰æ•™è‚²", "OECD", "æ¢ç©¶å­¦ç¿’", "ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²", "PBL"] },
    ]
  },
  // â”€â”€ å­¦ã³ â†’ ã‚¹ã‚­ãƒ« â”€â”€
  learn_skill: {
    message: "ã©ã‚“ãªåŠ›ã‚’ä¼¸ã°ã—ãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ§  è€ƒãˆã‚‹åŠ›ãƒ»æ€è€ƒåŠ›", next: null, tags: ["è€ƒãˆã‚‹åŠ›", "æ€è€ƒåŠ›", "è«–ç†çš„æ€è€ƒ", "éèªçŸ¥èƒ½åŠ›", "æ¢ç©¶å­¦ç¿’"] },
      { label: "ğŸ’ª ã‚°ãƒªãƒƒãƒˆãƒ»ã‚„ã‚ŠæŠœãåŠ›", next: null, tags: ["ã‚°ãƒªãƒƒãƒˆ", "éèªçŸ¥èƒ½åŠ›", "è€ƒãˆã‚‹åŠ›", "å¥½å¥‡å¿ƒ", "æˆé•·"] },
      { label: "â“ å¥½å¥‡å¿ƒãƒ»æ¢ç©¶å¿ƒ", next: null, tags: ["å¥½å¥‡å¿ƒ", "æ¢ç©¶", "å•ã„ã‚’ç«‹ã¦ã‚‹", "æ¢ç©¶çš„ãªå­¦ã³", "éèªçŸ¥èƒ½åŠ›"] },
      { label: "ğŸ¯ éèªçŸ¥èƒ½åŠ›ã¨ã¯ï¼Ÿ", next: null, tags: ["éèªçŸ¥èƒ½åŠ›", "ã‚°ãƒªãƒƒãƒˆ", "è€ƒãˆã‚‹åŠ›", "æ€è€ƒåŠ›", "å¥½å¥‡å¿ƒ"] },
      { label: "ğŸ“Š ã“ã‚Œã‹ã‚‰ã®æ™‚ä»£ã®å­¦åŠ›", next: null, tags: ["æ€è€ƒåŠ›", "è€ƒãˆã‚‹åŠ›", "AIæ™‚ä»£", "ä»£æ›¿ã•ã‚Œãªã„åŠ›", "éèªçŸ¥èƒ½åŠ›"] },
    ]
  },
  // â”€â”€ å­¦ã³ â†’ æ‰‹ã‚’å‹•ã‹ã™ â”€â”€
  learn_hands: {
    message: "æ‰‹ã‚’å‹•ã‹ã™å­¦ã³ã®ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ§© ãƒ‘ã‚ºãƒ«ã®å­¦ç¿’åŠ¹æœ", next: null, tags: ["ãƒ‘ã‚ºãƒ«", "ç©ºé–“èªçŸ¥åŠ›", "è«–ç†çš„æ€è€ƒ", "ç®—æ•°", "è€ƒãˆã‚‹åŠ›"] },
      { label: "ğŸªµ ã‚¦ãƒƒãƒ‰ã‚¯ãƒ©ãƒ•ãƒˆãƒ»æœ¨è‚²", next: null, tags: ["ã‚¦ãƒƒãƒ‰ã‚¯ãƒ©ãƒ•ãƒˆ", "æœ¨è‚²", "æ‰‹ã‚’å‹•ã‹ã™å­¦ã³", "èº«ä½“æ€§èªçŸ¥", "éèªçŸ¥èƒ½åŠ›"] },
      { label: "ğŸ§± ãƒ¬ã‚´ãƒ»ãƒ–ãƒ­ãƒƒã‚¯éŠã³", next: null, tags: ["ãƒ¬ã‚´", "ç©ºé–“èªçŸ¥åŠ›", "ãƒ‘ã‚ºãƒ«", "æ‰‹ã‚’å‹•ã‹ã™å­¦ã³", "è€ƒãˆã‚‹åŠ›"] },
      { label: "ğŸ–ï¸ èº«ä½“æ€§èªçŸ¥ã£ã¦ä½•ï¼Ÿ", next: null, tags: ["èº«ä½“æ€§èªçŸ¥", "æ‰‹ã‚’å‹•ã‹ã™å­¦ã³", "éèªçŸ¥èƒ½åŠ›", "ã‚¦ãƒƒãƒ‰ã‚¯ãƒ©ãƒ•ãƒˆ", "ãƒ‘ã‚ºãƒ«"] },
      { label: "ğŸ“ å—é¨“ã«ã‚‚æ´»ãã‚‹ï¼Ÿ", next: null, tags: ["ãƒ‘ã‚ºãƒ«", "ç®—æ•°", "ç©ºé–“èªçŸ¥åŠ›", "æ‰‹ã‚’å‹•ã‹ã™å­¦ã³", "è€ƒãˆã‚‹åŠ›"] },
    ]
  },
  // â”€â”€ å­¦ã³ â†’ å®¶åº­ â”€â”€
  learn_home: {
    message: "å®¶åº­å­¦ç¿’ã®ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ  è¦ªå­ã§ã§ãã‚‹æ¢ç©¶", next: null, tags: ["è¦ªå­å­¦ç¿’", "æ¢ç©¶ãƒãƒ¼ãƒˆ", "å•ã„ã‚’ç«‹ã¦ã‚‹", "è‡ªç”±ç ”ç©¶", "è¦ªå­"] },
      { label: "ğŸ“ è‡ªç”±ç ”ç©¶ã®ãƒ’ãƒ³ãƒˆ", next: null, tags: ["è‡ªç”±ç ”ç©¶", "æ¢ç©¶ãƒãƒ¼ãƒˆ", "å•ã„ã‚’ç«‹ã¦ã‚‹", "æ¢ç©¶", "å¥½å¥‡å¿ƒ"] },
      { label: "ğŸ“… å­¦ç¿’ç¿’æ…£ã®ã¤ãã‚Šæ–¹", next: null, tags: ["ç¿’æ…£åŒ–", "ä¸­å­¦æº–å‚™", "è¦ªå­å­¦ç¿’", "è€ƒãˆã‚‹åŠ›", "æ¢ç©¶ãƒãƒ¼ãƒˆ"] },
      { label: "ğŸŒ¸ æ˜¥ä¼‘ã¿ãƒ»é•·æœŸä¼‘ã¿ã®éã”ã—æ–¹", next: null, tags: ["æ˜¥ä¼‘ã¿", "è‡ªç”±ç ”ç©¶", "ä¸­å­¦æº–å‚™", "è¦ªå­å­¦ç¿’", "ç¿’æ…£åŒ–"] },
      { label: "ğŸ’ ä¸­å­¦æº–å‚™ã¨ã—ã¦", next: null, tags: ["ä¸­å­¦æº–å‚™", "ç¿’æ…£åŒ–", "è¦ªå­å­¦ç¿’", "æ¢ç©¶ãƒãƒ¼ãƒˆ", "è€ƒãˆã‚‹åŠ›"] },
    ]
  },
  // â”€â”€ å­¦ã³ â†’ èª­è§£ â”€â”€
  learn_read: {
    message: "èª­è§£åŠ›ãƒ»è¨˜è¿°åŠ›ã®ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ“– èª­è§£åŠ›ã®ä¼¸ã°ã—æ–¹", next: null, tags: ["èª­è§£åŠ›", "å›½èª", "è€ƒãˆã‚‹åŠ›", "æ€è€ƒåŠ›", "è¨˜è¿°åŠ›"] },
      { label: "âœï¸ è¨˜è¿°ãƒ»ä½œæ–‡ã®ç·´ç¿’æ³•", next: null, tags: ["è¨˜è¿°åŠ›", "ä½œæ–‡", "å›½èª", "èª­è§£åŠ›", "è€ƒãˆã‚‹åŠ›"] },
      { label: "ğŸ“° ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’èª­ã‚€åŠ›", next: null, tags: ["æ™‚äº‹å•é¡Œ", "ãƒ‹ãƒ¥ãƒ¼ã‚¹", "ãƒ‡ãƒ¼ã‚¿èª­è§£", "ç¤¾ä¼š", "è€ƒãˆã‚‹åŠ›"] },
      { label: "ğŸ’¡ è€ƒãˆã‚’è¨€è‘‰ã«ã™ã‚‹åŠ›", next: null, tags: ["è¨˜è¿°åŠ›", "è€ƒãˆã‚‹åŠ›", "æ€è€ƒåŠ›", "ä½œæ–‡", "å•ã„ã‚’ç«‹ã¦ã‚‹"] },
      { label: "ğŸ“Š ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è§£ãåŠ›", next: null, tags: ["ãƒ‡ãƒ¼ã‚¿èª­è§£", "æ€è€ƒåŠ›", "ç®—æ•°", "ç¤¾ä¼š", "è«–ç†çš„æ€è€ƒ"] },
    ]
  },
  // â”€â”€ AI â†’ å­¦æ ¡æ´»ç”¨ â”€â”€
  ai_school: {
    message: "å­¦æ ¡ã®AIæ´»ç”¨ã§ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ’» æˆæ¥­ã§ã®AIæ´»ç”¨", next: null, tags: ["AIæ´»ç”¨", "ç”ŸæˆAI", "AIæ•™è‚²", "Chromebook", "æ•™è‚²DX"] },
      { label: "ğŸ¤– ChatGPTã¨å­¦æ ¡", next: null, tags: ["ChatGPT", "ç”ŸæˆAI", "AIæ´»ç”¨", "AIæ•™è‚²", "æ•™è‚²DX"] },
      { label: "ğŸ“± EdTechãƒ»å­¦ç¿’ãƒ„ãƒ¼ãƒ«", next: null, tags: ["ã‚¹ã‚¿ãƒ‡ã‚£ãƒã‚±ãƒƒãƒˆ", "Chromebook", "AIæ´»ç”¨", "æ•™è‚²DX", "AIæ•™è‚²"] },
      { label: "ğŸ« æ ¡å‹™DXãƒ»å…ˆç”Ÿã®å¤‰åŒ–", next: null, tags: ["æ ¡å‹™DX", "æ•™è‚²DX", "AIæ´»ç”¨", "ç”ŸæˆAI", "æ–‡ç§‘çœ"] },
      { label: "ğŸ“Š å°å…¥çŠ¶æ³ãƒ»ãƒ‡ãƒ¼ã‚¿", next: null, tags: ["AIæ•™è‚²", "AIæ´»ç”¨", "æ•™è‚²DX", "æ–‡ç§‘çœ", "OECD"] },
    ]
  },
  // â”€â”€ AI â†’ å¿…è¦ãªåŠ› â”€â”€
  ai_skill: {
    message: "AIæ™‚ä»£ã«ã©ã‚“ãªåŠ›ãŒå¿…è¦ã ã¨æ€ã†ï¼Ÿ",
    options: [
      { label: "ğŸ§  AIã«ä»£æ›¿ã•ã‚Œãªã„åŠ›", next: null, tags: ["ä»£æ›¿ã•ã‚Œãªã„åŠ›", "AIæ™‚ä»£", "è€ƒãˆã‚‹åŠ›", "éèªçŸ¥èƒ½åŠ›", "æ€è€ƒåŠ›"] },
      { label: "ğŸ¤² æ‰‹ã‚’å‹•ã‹ã™å­¦ã³ã®ä¾¡å€¤", next: null, tags: ["æ‰‹ã‚’å‹•ã‹ã™å­¦ã³", "AIÃ—æ•™è‚²", "èº«ä½“æ€§èªçŸ¥", "AIæ™‚ä»£", "ä»£æ›¿ã•ã‚Œãªã„åŠ›"] },
      { label: "ğŸ’¡ å‰µé€ åŠ›ãƒ»å•ã„ã‚’ç«‹ã¦ã‚‹åŠ›", next: null, tags: ["å•ã„ã‚’ç«‹ã¦ã‚‹", "è€ƒãˆã‚‹åŠ›", "AIæ™‚ä»£", "ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å‹æ¢ç©¶", "å¥½å¥‡å¿ƒ"] },
      { label: "ğŸ¤ ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³åŠ›", next: null, tags: ["éèªçŸ¥èƒ½åŠ›", "AIæ™‚ä»£", "ä»£æ›¿ã•ã‚Œãªã„åŠ›", "è€ƒãˆã‚‹åŠ›", "ã‚°ãƒªãƒƒãƒˆ"] },
      { label: "ğŸ” æ¢ç©¶ã™ã‚‹åŠ›", next: null, tags: ["æ¢ç©¶", "æ¢ç©¶å­¦ç¿’", "AIÃ—æ•™è‚²", "AIæ™‚ä»£", "è€ƒãˆã‚‹åŠ›"] },
    ]
  },
  // â”€â”€ AI â†’ æ”¿ç­– â”€â”€
  ai_policy: {
    message: "æ•™è‚²æ”¿ç­–ã®ã©ã‚“ãªã“ã¨ãŒæ°—ã«ãªã‚‹ï¼Ÿ",
    options: [
      { label: "ğŸ“‹ å­¦ç¿’æŒ‡å°è¦é ˜ã®å¤‰åŒ–", next: null, tags: ["å­¦ç¿’æŒ‡å°è¦é ˜", "æ–‡ç§‘çœ", "ä¸­æ•™å¯©", "æ¢ç©¶çš„ãªå­¦ã³", "æƒ…å ±ãƒ»æŠ€è¡“ç§‘"] },
      { label: "ğŸ›ï¸ æ–‡ç§‘çœãƒ»ä¸­æ•™å¯©ã®å‹•ã", next: null, tags: ["æ–‡ç§‘çœ", "ä¸­æ•™å¯©", "å­¦ç¿’æŒ‡å°è¦é ˜", "æ•™è‚²DX", "AIæ•™è‚²"] },
      { label: "ğŸŒ OECDãªã©æµ·å¤–ã®å‹•å‘", next: null, tags: ["OECD", "ãƒ•ã‚£ãƒ³ãƒ©ãƒ³ãƒ‰æ•™è‚²", "ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²", "æ–‡ç§‘çœ", "STEM"] },
      { label: "ğŸ’» æƒ…å ±ãƒ»æŠ€è¡“ç§‘ã®æ–°è¨­", next: null, tags: ["æƒ…å ±ãƒ»æŠ€è¡“ç§‘", "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ•™è‚²", "æŠ€è¡“ãƒ»å®¶åº­ç§‘", "å­¦ç¿’æŒ‡å°è¦é ˜", "æ–‡ç§‘çœ"] },
      { label: "ğŸ“Š æ—¥æœ¬ã®æ•™è‚²ã®èª²é¡Œ", next: null, tags: ["æ–‡ç§‘çœ", "OECD", "ä¸­æ•™å¯©", "æ•™è‚²DX", "å­¦ç¿’æŒ‡å°è¦é ˜"] },
    ]
  },
  // â”€â”€ AI â†’ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° â”€â”€
  ai_prog: {
    message: "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ•™è‚²ã®ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ–¥ï¸ å°å­¦æ ¡ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°", next: null, tags: ["ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ•™è‚²", "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°", "æ–‡ç§‘çœ", "å­¦ç¿’æŒ‡å°è¦é ˜", "STEM"] },
      { label: "ğŸ§ª STEMæ•™è‚²ã¨ã®é–¢ä¿‚", next: null, tags: ["STEM", "STEAM", "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°", "SSH", "ç†ç³»"] },
      { label: "ğŸ® æ¥½ã—ãå­¦ã¹ã‚‹æ–¹æ³•", next: null, tags: ["ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°", "ãƒ¬ã‚´", "ãƒ‘ã‚ºãƒ«", "è€ƒãˆã‚‹åŠ›", "è«–ç†çš„æ€è€ƒ"] },
      { label: "ğŸ“‹ å…¥è©¦ã¸ã®å½±éŸ¿", next: null, tags: ["ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ•™è‚²", "é©æ€§æ¤œæŸ»", "æ¢ç©¶å‹", "æƒ…å ±ãƒ»æŠ€è¡“ç§‘", "2026å…¥è©¦"] },
      { label: "ğŸ¤– AIãƒªãƒ†ãƒ©ã‚·ãƒ¼", next: null, tags: ["AIæ•™è‚²", "AIæ´»ç”¨", "ç”ŸæˆAI", "AIæ™‚ä»£", "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°"] },
    ]
  },
  // â”€â”€ AI â†’ æœªæ¥ â”€â”€
  ai_future: {
    message: "ã“ã‚Œã‹ã‚‰ã®æ•™è‚²ã§ã©ã‚“ãªã“ã¨ãŒæ°—ã«ãªã‚‹ï¼Ÿ",
    options: [
      { label: "ğŸ”® 10å¹´å¾Œã®å­¦æ ¡", next: null, tags: ["AIæ™‚ä»£", "æ•™è‚²DX", "AIæ•™è‚²", "å­¦ç¿’æŒ‡å°è¦é ˜", "æ–‡ç§‘çœ"] },
      { label: "ğŸŒ ä¸–ç•Œã®æ•™è‚²ãƒˆãƒ¬ãƒ³ãƒ‰", next: null, tags: ["OECD", "ãƒ•ã‚£ãƒ³ãƒ©ãƒ³ãƒ‰æ•™è‚²", "ã‚°ãƒ­ãƒ¼ãƒãƒ«æ•™è‚²", "STEM", "PBL"] },
      { label: "ğŸ§  äººé–“ã«ã—ã‹ã§ããªã„å­¦ã³", next: null, tags: ["ä»£æ›¿ã•ã‚Œãªã„åŠ›", "AIæ™‚ä»£", "æ‰‹ã‚’å‹•ã‹ã™å­¦ã³", "éèªçŸ¥èƒ½åŠ›", "èº«ä½“æ€§èªçŸ¥"] },
      { label: "ğŸ“± ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã¨å­¦ã³", next: null, tags: ["æ•™è‚²DX", "AIæ´»ç”¨", "Chromebook", "ã‚¹ã‚¿ãƒ‡ã‚£ãƒã‚±ãƒƒãƒˆ", "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°"] },
      { label: "ğŸ’¡ æ¢ç©¶ã¨AIã®èåˆ", next: null, tags: ["AIÃ—æ•™è‚²", "æ¢ç©¶å­¦ç¿’", "AIæ™‚ä»£", "ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å‹æ¢ç©¶", "è€ƒãˆã‚‹åŠ›"] },
    ]
  },
  // â”€â”€ å­è‚²ã¦ â†’ ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ â”€â”€
  parent_comm: {
    message: "è¦ªå­ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ—£ï¸ å£°ã‹ã‘ãƒ»è¨€è‘‰ãŒã‘", next: null, tags: ["å£°ã‹ã‘", "è¦ªå­", "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸", "ä¿è­·è€…ã®å£°", "æˆé•·"] },
      { label: "ğŸ’¬ è€ƒãˆã‚’å¼•ãå‡ºã™å¯¾è©±", next: null, tags: ["è¦ªå­", "å•ã„ã‚’ç«‹ã¦ã‚‹", "è€ƒãˆã‚‹åŠ›", "å£°ã‹ã‘", "æ¢ç©¶"] },
      { label: "ğŸ“š ä¸€ç·’ã«ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’èª­ã‚€", next: null, tags: ["è¦ªå­", "ãƒ‹ãƒ¥ãƒ¼ã‚¹", "æ™‚äº‹å•é¡Œ", "ãƒ‡ãƒ¼ã‚¿èª­è§£", "è¦ªå­å­¦ç¿’"] },
      { label: "ğŸ¤ ä¾¡å€¤è¦³ã‚’ä¼ãˆã‚‹", next: null, tags: ["ä¾¡å€¤è¦³", "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸", "è¦ªå­", "æˆé•·", "ä¿è­·è€…ã®å£°"] },
      { label: "ğŸ‘‚ å­ã©ã‚‚ã®è©±ã‚’è´ã", next: null, tags: ["è¦ªå­", "å£°ã‹ã‘", "ä¿è­·è€…ã®å£°", "æˆé•·", "éèªçŸ¥èƒ½åŠ›"] },
    ]
  },
  // â”€â”€ å­è‚²ã¦ â†’ å—é¨“ã‚µãƒãƒ¼ãƒˆ â”€â”€
  parent_juken: {
    message: "å—é¨“æœŸã®ã‚µãƒãƒ¼ãƒˆã§ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ§˜ è¦ªã®å¿ƒæ§‹ãˆ", next: null, tags: ["è¦ªã®å¿ƒæ§‹ãˆ", "ä¿è­·è€…å‘ã‘", "ãƒ¡ãƒ³ã‚¿ãƒ«", "å—é¨“å¾Œ", "è¦ªå­"] },
      { label: "ğŸ“‹ åˆæ ¼ç™ºè¡¨ã®å‰å¾Œ", next: null, tags: ["åˆæ ¼ç™ºè¡¨", "å—é¨“å¾Œ", "ãƒ¡ãƒ³ã‚¿ãƒ«", "è¦ªã®å¿ƒæ§‹ãˆ", "ä¿è­·è€…å‘ã‘"] },
      { label: "ğŸ’ª å­ã©ã‚‚ã®ãƒ¡ãƒ³ã‚¿ãƒ«ã‚±ã‚¢", next: null, tags: ["ãƒ¡ãƒ³ã‚¿ãƒ«", "è¦ªã®å¿ƒæ§‹ãˆ", "å£°ã‹ã‘", "æˆé•·", "éèªçŸ¥èƒ½åŠ›"] },
      { label: "ğŸ“… æ—¥ã€…ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†", next: null, tags: ["ä¿è­·è€…å‘ã‘", "è¦ªã®å¿ƒæ§‹ãˆ", "ç¿’æ…£åŒ–", "è¦ªå­å­¦ç¿’", "ä¸­å­¦æº–å‚™"] },
      { label: "ğŸ¤” å¡¾ã¨ã®ã¤ãã‚ã„æ–¹", next: null, tags: ["ä¿è­·è€…å‘ã‘", "è¦ªã®å¿ƒæ§‹ãˆ", "å­¦æ ¡é¸ã³", "è¦ªå­", "è¦‹æ¥µã‚"] },
    ]
  },
  // â”€â”€ å­è‚²ã¦ â†’ éŠã³ â”€â”€
  parent_play: {
    message: "éŠã³ãƒ»ä½“é¨“ã®ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ§© ãƒ‘ã‚ºãƒ«éŠã³ã®åŠ¹æœ", next: null, tags: ["ãƒ‘ã‚ºãƒ«", "ç©ºé–“èªçŸ¥åŠ›", "è«–ç†çš„æ€è€ƒ", "ç®—æ•°", "å¥½å¥‡å¿ƒ"] },
      { label: "ğŸªµ ã‚¦ãƒƒãƒ‰ã‚¯ãƒ©ãƒ•ãƒˆãƒ»å·¥ä½œ", next: null, tags: ["ã‚¦ãƒƒãƒ‰ã‚¯ãƒ©ãƒ•ãƒˆ", "æœ¨è‚²", "æ‰‹ã‚’å‹•ã‹ã™å­¦ã³", "èº«ä½“æ€§èªçŸ¥", "éèªçŸ¥èƒ½åŠ›"] },
      { label: "ğŸ§± ãƒ¬ã‚´ãƒ»ãƒ–ãƒ­ãƒƒã‚¯", next: null, tags: ["ãƒ¬ã‚´", "ç©ºé–“èªçŸ¥åŠ›", "ãƒ‘ã‚ºãƒ«", "æ‰‹ã‚’å‹•ã‹ã™å­¦ã³", "å¥½å¥‡å¿ƒ"] },
      { label: "ğŸŒ¿ è‡ªç„¶ä½“é¨“ãƒ»ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢", next: null, tags: ["è‡ªç”±ç ”ç©¶", "å¥½å¥‡å¿ƒ", "æœ¨è‚²", "éèªçŸ¥èƒ½åŠ›", "ãƒ•ã‚£ãƒ³ãƒ©ãƒ³ãƒ‰æ•™è‚²"] },
      { label: "ğŸ¯ éŠã³ãŒå­¦ã³ã«ãªã‚‹ç†ç”±", next: null, tags: ["éèªçŸ¥èƒ½åŠ›", "å¥½å¥‡å¿ƒ", "æ‰‹ã‚’å‹•ã‹ã™å­¦ã³", "ãƒ‘ã‚ºãƒ«", "è€ƒãˆã‚‹åŠ›"] },
    ]
  },
  // â”€â”€ å­è‚²ã¦ â†’ ãƒ¡ãƒ³ã‚¿ãƒ« â”€â”€
  parent_mental: {
    message: "ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ»å¿ƒæ§‹ãˆã®ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸ˜° å—é¨“ã®ã‚¹ãƒˆãƒ¬ã‚¹å¯¾ç­–", next: null, tags: ["ãƒ¡ãƒ³ã‚¿ãƒ«", "è¦ªã®å¿ƒæ§‹ãˆ", "å£°ã‹ã‘", "ä¿è­·è€…å‘ã‘", "å—é¨“å¾Œ"] },
      { label: "ğŸ’ª æŠ˜ã‚Œãªã„å¿ƒã®è‚²ã¦æ–¹", next: null, tags: ["ã‚°ãƒªãƒƒãƒˆ", "éèªçŸ¥èƒ½åŠ›", "ãƒ¡ãƒ³ã‚¿ãƒ«", "æˆé•·", "è€ƒãˆã‚‹åŠ›"] },
      { label: "ğŸ§˜ è¦ªè‡ªèº«ã®ãƒ¡ãƒ³ã‚¿ãƒ«ã‚±ã‚¢", next: null, tags: ["è¦ªã®å¿ƒæ§‹ãˆ", "ãƒ¡ãƒ³ã‚¿ãƒ«", "ä¿è­·è€…å‘ã‘", "ä¿è­·è€…ã®å£°", "è¦ªå­"] },
      { label: "ğŸŒˆ ä¸åˆæ ¼ã¨ã®å‘ãåˆã„æ–¹", next: null, tags: ["åˆæ ¼ç™ºè¡¨", "å—é¨“å¾Œ", "ãƒ¡ãƒ³ã‚¿ãƒ«", "è¦ªã®å¿ƒæ§‹ãˆ", "æˆé•·"] },
      { label: "ğŸ¯ ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç¶­æŒ", next: null, tags: ["ãƒ¡ãƒ³ã‚¿ãƒ«", "å£°ã‹ã‘", "ç¿’æ…£åŒ–", "ã‚°ãƒªãƒƒãƒˆ", "è¦ªå­"] },
    ]
  },
  // â”€â”€ å­è‚²ã¦ â†’ æˆé•· â”€â”€
  parent_growth: {
    message: "å­ã©ã‚‚ã®æˆé•·ã§ã©ã‚“ãªã“ã¨ãŒçŸ¥ã‚ŠãŸã„ï¼Ÿ",
    options: [
      { label: "ğŸŒ± å¥½å¥‡å¿ƒã‚’è‚²ã¦ã‚‹", next: null, tags: ["å¥½å¥‡å¿ƒ", "æ¢ç©¶", "å•ã„ã‚’ç«‹ã¦ã‚‹", "éèªçŸ¥èƒ½åŠ›", "è€ƒãˆã‚‹åŠ›"] },
      { label: "ğŸ§  è€ƒãˆã‚‹åŠ›ã‚’ä¼¸ã°ã™", next: null, tags: ["è€ƒãˆã‚‹åŠ›", "æ€è€ƒåŠ›", "è«–ç†çš„æ€è€ƒ", "æ¢ç©¶å­¦ç¿’", "éèªçŸ¥èƒ½åŠ›"] },
      { label: "ğŸ¤ ç¤¾ä¼šæ€§ãƒ»å”åƒã™ã‚‹åŠ›", next: null, tags: ["éèªçŸ¥èƒ½åŠ›", "ã‚°ãƒªãƒƒãƒˆ", "æˆé•·", "PBL", "ä¾¡å€¤è¦³"] },
      { label: "ğŸ¨ å‰µé€ æ€§ã‚’ä¼¸ã°ã™", next: null, tags: ["ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å‹æ¢ç©¶", "æ‰‹ã‚’å‹•ã‹ã™å­¦ã³", "å¥½å¥‡å¿ƒ", "ãƒ¬ã‚´", "æ¢ç©¶"] },
      { label: "ğŸ“Š å­¦åŠ›ã ã‘ã˜ã‚ƒãªã„è©•ä¾¡", next: null, tags: ["éèªçŸ¥èƒ½åŠ›", "è€ƒãˆã‚‹åŠ›", "æ¢ç©¶å­¦ç¿’", "æ•™è‚²ã®è³ª", "AIæ™‚ä»£"] },
    ]
  },
};

// â”â”â” è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ï¼ˆarticles.jsonã‹ã‚‰èª­ã¿è¾¼ã¿ï¼‰ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”



// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// ğŸ¨ UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

function CalendarDropdown({ currentDate, onDateChange, onClose, articles }) {
  const calRef = useRef(null);

  useEffect(() => {
    const handleClick = (e) => {
      if (calRef.current && !calRef.current.contains(e.target)) onClose();
    };
    document.addEventListener("mousedown", handleClick);
    return () => document.removeEventListener("mousedown", handleClick);
  }, [onClose]);

  // February 2026 starts on Sunday (day 0)
  const daysInMonth = 28;
  const startDay = 0; // Sunday
  const dayNames = ["æ—¥", "æœˆ", "ç«", "æ°´", "æœ¨", "é‡‘", "åœŸ"];
  const articleDates = articles
    ? [...new Set(articles.map(a => parseInt(a.dateKey.slice(2), 10)))]
    : [];

  const cells = [];
  for (let i = 0; i < startDay; i++) cells.push(null);
  for (let d = 1; d <= daysInMonth; d++) cells.push(d);

  const dateKeyFor = (d) => `02${String(d).padStart(2, "0")}`;
  const isSelected = (d) => currentDate === dateKeyFor(d);
  const hasArticle = (d) => articleDates.includes(d);

  return (
    <div ref={calRef} style={{
      position: "absolute", top: "100%", left: 0, marginTop: 6,
      background: "#fff", borderRadius: 16,
      border: "1px solid #E8E0D4",
      boxShadow: "0 12px 40px rgba(26,18,7,0.15)",
      padding: "20px", width: 300, zIndex: 200,
      animation: "calendarSlideIn 0.25s ease",
    }}>
      {/* Month header */}
      <div style={{
        display: "flex", alignItems: "center", justifyContent: "space-between",
        marginBottom: 16,
      }}>
        <div style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 16, fontWeight: 800, color: "#1A1207",
        }}>ğŸ“… 2026å¹´2æœˆ</div>
        <button onClick={() => { onDateChange("all"); onClose(); }} style={{
          padding: "4px 12px", borderRadius: 12, border: "1px solid #D4C5AE",
          background: currentDate === "all" ? "#1A1207" : "#FFFCF7",
          color: currentDate === "all" ? "#fff" : "#6B5D4A",
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 11, fontWeight: 600, cursor: "pointer",
        }}>ã™ã¹ã¦è¡¨ç¤º</button>
      </div>

      {/* Day names */}
      <div style={{ display: "grid", gridTemplateColumns: "repeat(7, 1fr)", gap: 2, marginBottom: 4 }}>
        {dayNames.map((d, i) => (
          <div key={d} style={{
            textAlign: "center", padding: "4px 0",
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 10, fontWeight: 700,
            color: i === 0 ? "#E8453C" : i === 6 ? "#2563EB" : "#A0947E",
          }}>{d}</div>
        ))}
      </div>

      {/* Calendar grid */}
      <div style={{ display: "grid", gridTemplateColumns: "repeat(7, 1fr)", gap: 2 }}>
        {cells.map((day, i) => {
          if (day === null) return <div key={`e${i}`} />;
          const hasArt = hasArticle(day);
          const selected = isSelected(day);
          const isSunday = i % 7 === 0;
          const isSaturday = i % 7 === 6;

          return (
            <button
              key={day}
              onClick={() => {
                if (hasArt) { onDateChange(dateKeyFor(day)); onClose(); }
              }}
              style={{
                position: "relative",
                width: "100%", aspectRatio: "1", borderRadius: 12,
                border: selected ? "2px solid #EA580C" : "2px solid transparent",
                background: selected ? "#FFF7ED" : hasArt ? "#FFFCF7" : "transparent",
                cursor: hasArt ? "pointer" : "default",
                display: "flex", flexDirection: "column",
                alignItems: "center", justifyContent: "center", gap: 2,
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 14, fontWeight: hasArt ? 800 : 400,
                color: selected ? "#EA580C" : hasArt ? "#1A1207" : isSunday ? "#E8453C99" : isSaturday ? "#2563EB99" : "#C5B9A5",
                transition: "all 0.15s ease",
              }}
            >
              {day}
              {hasArt && (
                <div style={{
                  display: "flex", gap: 2, alignItems: "center",
                }}>
                  <span style={{
                    width: 5, height: 5, borderRadius: "50%",
                    background: selected ? "#EA580C" : "#F97316",
                  }} />
                </div>
              )}
            </button>
          );
        })}
      </div>

      {/* Legend */}
      <div style={{
        display: "flex", alignItems: "center", gap: 12,
        marginTop: 14, paddingTop: 12, borderTop: "1px solid #F0EBE2",
      }}>
        <div style={{ display: "flex", alignItems: "center", gap: 5 }}>
          <span style={{ width: 6, height: 6, borderRadius: "50%", background: "#F97316" }} />
          <span style={{
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 10, color: "#8B7355",
          }}>è¨˜äº‹ã‚ã‚Š</span>
        </div>
        <span style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 10, color: "#A0947E",
        }}>æ—¥ä»˜ã‚’ã‚¿ãƒƒãƒ—ã—ã¦çµã‚Šè¾¼ã¿</span>
      </div>
    </div>
  );
}

function Header({ onNav, currentCategory, currentDate, onDateChange, articles }) {
  const [scrolled, setScrolled] = useState(false);
  const [calendarOpen, setCalendarOpen] = useState(false);

  useEffect(() => {
    const h = () => setScrolled(window.scrollY > 40);
    window.addEventListener("scroll", h);
    return () => window.removeEventListener("scroll", h);
  }, []);

  const dateLabel = currentDate === "all"
    ? "2æœˆã®ãƒ‹ãƒ¥ãƒ¼ã‚¹"
    : `2æœˆ${parseInt(currentDate.slice(2))}æ—¥`;

  return (
    <header style={{
      position: "sticky", top: 0, zIndex: 100,
      background: scrolled ? "rgba(255,252,247,0.95)" : "#FFFCF7",
      backdropFilter: scrolled ? "blur(12px)" : "none",
      borderBottom: scrolled ? "1px solid #E8E0D4" : "1px solid transparent",
      transition: "all 0.3s ease",
    }}>
      <div style={{ maxWidth: 960, margin: "0 auto", padding: "0 20px" }}>
        <div style={{
          display: "flex", alignItems: "center", justifyContent: "space-between",
          padding: scrolled ? "10px 0" : "20px 0",
          transition: "padding 0.3s ease",
        }}>
          <div style={{ display: "flex", alignItems: "center", gap: 12, cursor: "pointer" }}
            onClick={() => { onNav("all"); onDateChange("all"); setCalendarOpen(false); }}>
            <div style={{
              width: 44, height: 44, borderRadius: 12,
              background: "linear-gradient(135deg, #F97316 0%, #EA580C 100%)",
              display: "flex", alignItems: "center", justifyContent: "center",
              fontSize: 22, boxShadow: "0 2px 8px rgba(249,115,22,0.3)",
            }}>ğŸ”</div>
            <div>
              <div style={{
                fontFamily: "'Zen Kaku Gothic New', 'Noto Sans JP', sans-serif",
                fontWeight: 900, fontSize: scrolled ? 16 : 20,
                color: "#1A1207", letterSpacing: "-0.02em",
                transition: "font-size 0.3s ease",
              }}>ãƒˆãƒ¬ã‚¤ãƒ«æ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹</div>
              {!scrolled && (
                <div style={{
                  fontFamily: "'Zen Kaku Gothic New', sans-serif",
                  fontSize: 11, color: "#8B7355", letterSpacing: "0.05em", marginTop: 2,
                }}>ä¸­å­¦å—é¨“ Ã— æ¢ç©¶å­¦ç¿’ Ã— AIæ™‚ä»£ã®å­¦ã³</div>
              )}
            </div>
          </div>
          <a href="#about" style={{
            fontSize: 12, color: "#8B7355", textDecoration: "none",
            padding: "6px 14px", borderRadius: 20,
            border: "1px solid #D4C5AE", fontWeight: 600,
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
          }}>TRAILã«ã¤ã„ã¦</a>
        </div>

        {/* Date picker + Category nav row */}
        <div style={{
          display: "flex", alignItems: "center", gap: 8,
          padding: "8px 0 12px",
        }}>
          {/* Calendar button */}
          <div style={{ position: "relative" }}>
            <button
              onClick={() => setCalendarOpen(!calendarOpen)}
              style={{
                display: "flex", alignItems: "center", gap: 6,
                padding: "6px 14px", borderRadius: 20,
                border: currentDate !== "all" ? "2px solid #EA580C" : "1px solid #D4C5AE",
                background: currentDate !== "all" ? "#FFF7ED" : "#FFFCF7",
                cursor: "pointer",
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 12, fontWeight: 700,
                color: currentDate !== "all" ? "#EA580C" : "#6B5D4A",
                transition: "all 0.2s ease",
              }}
            >
              <span style={{ fontSize: 14 }}>ğŸ“…</span>
              {dateLabel}
              <span style={{
                fontSize: 10, marginLeft: 2,
                transform: calendarOpen ? "rotate(180deg)" : "rotate(0deg)",
                transition: "transform 0.2s ease",
              }}>â–¼</span>
            </button>

            {calendarOpen && (
              <CalendarDropdown
                currentDate={currentDate}
                onDateChange={onDateChange}
                onClose={() => setCalendarOpen(false)}
                articles={articles}
              />
            )}
          </div>

          {/* Divider */}
          <div style={{ width: 1, height: 20, background: "#E8E0D4", flexShrink: 0 }} />

          {/* Category nav */}
          <nav style={{
            display: "flex", gap: 4, flex: 1,
            overflowX: "auto", scrollbarWidth: "none",
          }}>
            {NAV_CATEGORIES.map(cat => (
              <button key={cat.id} onClick={() => onNav(cat.id)} style={{
                display: "flex", alignItems: "center", gap: 5,
                padding: "6px 12px", borderRadius: 20,
                border: "none", cursor: "pointer",
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 12, fontWeight: currentCategory === cat.id ? 700 : 500,
                background: currentCategory === cat.id ? "#1A1207" : "transparent",
                color: currentCategory === cat.id ? "#FFFCF7" : "#6B5D4A",
                whiteSpace: "nowrap", transition: "all 0.2s ease",
              }}>
                <span style={{ fontSize: 13 }}>{cat.icon}</span>
                {cat.label}
              </button>
            ))}
          </nav>
        </div>
      </div>
    </header>
  );
}

function HeroSection() {
  return (
    <section style={{
      background: "linear-gradient(135deg, #FFF7ED 0%, #FEF3E2 50%, #FFFBF5 100%)",
      borderBottom: "1px solid #E8E0D4",
      padding: "44px 20px 36px",
    }}>
      <div style={{ maxWidth: 960, margin: "0 auto" }}>
        <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 14 }}>
          <span style={{
            display: "inline-block", width: 8, height: 8, borderRadius: "50%",
            background: "#E8453C", animation: "pulse 2s infinite",
          }} />
          <span style={{
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 12, fontWeight: 700, color: "#E8453C",
            letterSpacing: "0.08em",
          }}>LIVE â€” 2026å¹´2æœˆ</span>
        </div>
        <h1 style={{
          fontFamily: "'Zen Kaku Gothic New', 'Noto Sans JP', sans-serif",
          fontSize: "clamp(22px, 5vw, 34px)", fontWeight: 900,
          color: "#1A1207", lineHeight: 1.35,
          letterSpacing: "-0.02em", margin: "0 0 10px",
        }}>
          2026å¹´ä¸­å­¦å…¥è©¦ã€ã¾ã•ã«çœŸã£æœ€ä¸­ã€‚<br/>
          <span style={{ color: "#EA580C" }}>æ¢ç©¶ã®ç›®ã§</span>ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’èª­ã‚‚ã†ã€‚
        </h1>
        <p style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 14, color: "#6B5D4A", lineHeight: 1.7,
          maxWidth: 560, margin: 0,
        }}>
          åå·®å€¤ã‚„åˆæ ¼ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã ã‘ã˜ã‚ƒãªã„ã€‚ã€Œãªãœï¼Ÿã€ã€Œæœ¬å½“ã«ï¼Ÿã€ã€Œè‡ªåˆ†ãªã‚‰ã©ã†è€ƒãˆã‚‹ï¼Ÿã€â€”â€”<br/>
          è¦ªå­ã§ä¸€ç·’ã«ã€ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‹ã‚‰å­¦ã¶åŠ›ã‚’è‚²ã¦ã¾ã™ã€‚
        </p>
        <div style={{ display: "flex", gap: 10, marginTop: 20, flexWrap: "wrap" }}>
          {["ğŸ§’ å­ã©ã‚‚ã«ã‚‚èª­ã‚ã‚‹", "ğŸ¤– AIæ™‚ä»£ã®è¦–ç‚¹ã¤ã", "ğŸ’¬ è¦ªå­ã®å¯¾è©±ãƒã‚¿"].map(tag => (
            <span key={tag} style={{
              display: "inline-flex", alignItems: "center",
              padding: "5px 12px", borderRadius: 20,
              background: "rgba(234,88,12,0.08)",
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 11, fontWeight: 600, color: "#C2410C",
            }}>{tag}</span>
          ))}
        </div>
      </div>
    </section>
  );
}

function ArticleCard({ article, onSelect, index, onTagClick }) {
  const [hovered, setHovered] = useState(false);
  const color = CATEGORY_COLORS[article.category] || "#6B5D4A";
  const label = CATEGORY_LABELS[article.category] || "";

  return (
    <article
      onClick={() => onSelect(article)}
      onMouseEnter={() => setHovered(true)}
      onMouseLeave={() => setHovered(false)}
      style={{
        background: "#fff", borderRadius: 16,
        border: "1px solid #E8E0D4", overflow: "hidden",
        cursor: "pointer", transition: "all 0.3s ease",
        transform: hovered ? "translateY(-3px)" : "translateY(0)",
        boxShadow: hovered ? "0 10px 28px rgba(26,18,7,0.1)" : "0 2px 8px rgba(26,18,7,0.04)",
        animation: `fadeSlideUp 0.4s ease ${index * 0.06}s both`,
      }}
    >
      <div style={{ height: 4, background: `linear-gradient(90deg, ${color}, ${color}88)` }} />
      <div style={{ padding: "20px 22px 18px" }}>
        <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 10 }}>
          <span style={{
            padding: "2px 10px", borderRadius: 12,
            background: `${color}12`, color,
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 11, fontWeight: 700,
          }}>{label}</span>
          <span style={{
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 11, color: "#A0947E",
          }}>{article.date}</span>
          <span style={{
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 10, color: "#A0947E", background: "#F5F0E8",
            padding: "1px 7px", borderRadius: 8,
          }}>{getReadingTime(article)}åˆ†ã§èª­ã‚ã‚‹</span>
        </div>
        <div style={{ display: "flex", gap: 12, alignItems: "flex-start" }}>
          <span style={{ fontSize: 28, lineHeight: 1, flexShrink: 0, marginTop: 2 }}>{article.heroEmoji}</span>
          <div>
            <h2 style={{
              fontFamily: "'Zen Kaku Gothic New', 'Noto Sans JP', sans-serif",
              fontSize: 16, fontWeight: 800, color: "#1A1207",
              lineHeight: 1.45, margin: "0 0 8px", letterSpacing: "-0.01em",
            }}>{article.title}</h2>
            <p style={{
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 13, color: "#6B5D4A", lineHeight: 1.6, margin: 0,
            }}>{article.summary}</p>
          </div>
        </div>
        <div style={{ display: "flex", gap: 6, marginTop: 14, flexWrap: "wrap", alignItems: "center" }}>
          {article.tags.slice(0, 3).map(tag => (
            <span key={tag} onClick={e => { e.stopPropagation(); onTagClick && onTagClick(tag); }} style={{
              padding: "2px 9px", borderRadius: 10, background: "#F5F0E8",
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 10, color: "#8B7355",
              cursor: onTagClick ? "pointer" : "default", transition: "all 0.2s ease",
            }}
            onMouseEnter={e => { if (onTagClick) { e.currentTarget.style.background = "#EA580C"; e.currentTarget.style.color = "#fff"; } }}
            onMouseLeave={e => { e.currentTarget.style.background = "#F5F0E8"; e.currentTarget.style.color = "#8B7355"; }}
            >#{tag}</span>
          ))}
          <span style={{
            marginLeft: "auto",
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 11, color: "#EA580C", fontWeight: 600,
          }}>ç¶šãã‚’èª­ã‚€ â†’</span>
        </div>
      </div>
    </article>
  );
}

function SpecialBox({ type, title, icon, content }) {
  const styles = {
    tankyu: { bg: "#FFF7ED", border: "#F9731622", accent: "#EA580C" },
    ai: { bg: "#EFF6FF", border: "#3B82F622", accent: "#2563EB" },
    oyako: { bg: "#F0FDF4", border: "#22C55E22", accent: "#059669" },
  };
  const s = styles[type] || styles.tankyu;
  return (
    <div style={{
      background: s.bg, borderRadius: 14,
      border: `1px solid ${s.border}`, padding: "18px 20px", margin: "20px 0",
    }}>
      <div style={{
        fontFamily: "'Zen Kaku Gothic New', sans-serif",
        fontSize: 13, fontWeight: 800, color: s.accent, marginBottom: 8,
      }}>{icon} {title}</div>
      <div style={{
        fontFamily: "'Zen Kaku Gothic New', sans-serif",
        fontSize: 13, lineHeight: 1.8, color: "#2D2416",
      }}>{content}</div>
    </div>
  );
}

// SNSå…±æœ‰ãƒœã‚¿ãƒ³
function ShareButtons({ article }) {
  const [copied, setCopied] = useState(false);
  const url = window.location.href;
  const text = `${article.title}ï½œTRAILæ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹`;

  const handleCopy = () => {
    navigator.clipboard.writeText(url).then(() => {
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    });
  };

  const btnStyle = {
    display: "inline-flex", alignItems: "center", gap: 6,
    padding: "8px 16px", borderRadius: 20, border: "1px solid #E8E0D4",
    background: "#fff", cursor: "pointer", transition: "all 0.2s ease",
    fontFamily: "'Zen Kaku Gothic New', sans-serif", fontSize: 12, fontWeight: 600,
  };

  return (
    <div style={{
      display: "flex", gap: 8, flexWrap: "wrap",
      margin: "24px 0", padding: "18px 0", borderTop: "1px solid #E8E0D4",
    }}>
      <span style={{
        fontFamily: "'Zen Kaku Gothic New', sans-serif",
        fontSize: 11, fontWeight: 700, color: "#8B7355",
        display: "flex", alignItems: "center", marginRight: 4,
      }}>å…±æœ‰</span>
      <button onClick={() => window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, "_blank")}
        style={{ ...btnStyle, color: "#1DA1F2" }}
        onMouseEnter={e => { e.currentTarget.style.background = "#E8F5FE"; e.currentTarget.style.borderColor = "#1DA1F2"; }}
        onMouseLeave={e => { e.currentTarget.style.background = "#fff"; e.currentTarget.style.borderColor = "#E8E0D4"; }}
      >ğ• ãƒã‚¹ãƒˆ</button>
      <button onClick={() => window.open(`https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(url)}`, "_blank")}
        style={{ ...btnStyle, color: "#06C755" }}
        onMouseEnter={e => { e.currentTarget.style.background = "#E6F9ED"; e.currentTarget.style.borderColor = "#06C755"; }}
        onMouseLeave={e => { e.currentTarget.style.background = "#fff"; e.currentTarget.style.borderColor = "#E8E0D4"; }}
      >LINE</button>
      <button onClick={handleCopy}
        style={{ ...btnStyle, color: copied ? "#059669" : "#6B5D4A" }}
        onMouseEnter={e => { e.currentTarget.style.background = "#F5F0E8"; }}
        onMouseLeave={e => { e.currentTarget.style.background = "#fff"; }}
      >{copied ? "ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!" : "URLã‚’ã‚³ãƒ”ãƒ¼"}</button>
    </div>
  );
}

// é–¢é€£è¨˜äº‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
function RelatedArticles({ currentArticle, articles, onSelect }) {
  if (!articles || articles.length === 0) return null;

  // åŒã‚«ãƒ†ã‚´ãƒª & ã‚¿ã‚°ã®ä¸€è‡´åº¦ã§ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
  const scored = articles
    .filter(a => a.id !== currentArticle.id)
    .map(a => {
      let score = 0;
      if (a.category === currentArticle.category) score += 3;
      if (a.tags && currentArticle.tags) {
        const overlap = a.tags.filter(t => currentArticle.tags.includes(t)).length;
        score += overlap * 2;
      }
      return { article: a, score };
    })
    .filter(s => s.score > 0)
    .sort((a, b) => b.score - a.score)
    .slice(0, 3);

  if (scored.length === 0) return null;

  return (
    <div style={{
      marginTop: 28, padding: "22px 20px",
      background: "#F9F4EC", borderRadius: 16,
    }}>
      <div style={{
        fontFamily: "'Zen Kaku Gothic New', sans-serif",
        fontSize: 13, fontWeight: 800, color: "#1A1207", marginBottom: 14,
      }}>ğŸ“ é–¢é€£è¨˜äº‹</div>
      <div style={{ display: "flex", flexDirection: "column", gap: 10 }}>
        {scored.map(({ article }) => {
          const color = CATEGORY_COLORS[article.category] || "#6B5D4A";
          const label = CATEGORY_LABELS[article.category] || "";
          return (
            <div key={article.id} onClick={() => onSelect(article)}
              style={{
                display: "flex", gap: 10, alignItems: "center",
                padding: "12px 14px", background: "#fff", borderRadius: 12,
                border: "1px solid #E8E0D4", cursor: "pointer", transition: "all 0.2s ease",
              }}
              onMouseEnter={e => { e.currentTarget.style.borderColor = "#F97316"; e.currentTarget.style.boxShadow = "0 2px 8px rgba(249,115,22,0.1)"; }}
              onMouseLeave={e => { e.currentTarget.style.borderColor = "#E8E0D4"; e.currentTarget.style.boxShadow = "none"; }}
            >
              <span style={{ fontSize: 22, flexShrink: 0 }}>{article.heroEmoji}</span>
              <div style={{ flex: 1, minWidth: 0 }}>
                <div style={{ display: "flex", alignItems: "center", gap: 6, marginBottom: 3 }}>
                  <span style={{
                    padding: "1px 7px", borderRadius: 8, background: `${color}12`, color,
                    fontFamily: "'Zen Kaku Gothic New', sans-serif", fontSize: 9, fontWeight: 700,
                  }}>{label}</span>
                  <span style={{
                    fontFamily: "'Zen Kaku Gothic New', sans-serif", fontSize: 10, color: "#A0947E",
                  }}>{article.date}</span>
                </div>
                <div style={{
                  fontFamily: "'Zen Kaku Gothic New', sans-serif", fontSize: 12, fontWeight: 700,
                  color: "#1A1207", lineHeight: 1.4,
                  overflow: "hidden", textOverflow: "ellipsis",
                  display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical",
                }}>{article.title}</div>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  );
}

// YouTube URL â†’ embed ID å¤‰æ›
function extractYouTubeId(url) {
  if (!url) return null;
  const patterns = [
    /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/|youtube\.com\/shorts\/)([a-zA-Z0-9_-]{11})/,
    /^([a-zA-Z0-9_-]{11})$/,
  ];
  for (const p of patterns) {
    const m = url.match(p);
    if (m) return m[1];
  }
  return null;
}

function VideoEmbed({ url }) {
  const videoId = extractYouTubeId(url);
  if (!videoId) return null;
  return (
    <div style={{
      margin: "24px 0", borderRadius: 14, overflow: "hidden",
      border: "1px solid #E8E0D4",
      boxShadow: "0 2px 12px rgba(26,18,7,0.06)",
    }}>
      <div style={{
        fontFamily: "'Zen Kaku Gothic New', sans-serif",
        fontSize: 12, fontWeight: 700, color: "#6B5D4A",
        padding: "12px 16px 0", display: "flex", alignItems: "center", gap: 6,
      }}>
        <span style={{ fontSize: 14 }}>ğŸ¬</span> é–¢é€£å‹•ç”»
      </div>
      <div style={{
        position: "relative", paddingBottom: "56.25%", height: 0,
        margin: "10px 12px 12px",  borderRadius: 10, overflow: "hidden",
      }}>
        <iframe
          src={`https://www.youtube.com/embed/${videoId}`}
          title="é–¢é€£å‹•ç”»"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowFullScreen
          style={{
            position: "absolute", top: 0, left: 0,
            width: "100%", height: "100%", border: "none",
          }}
        />
      </div>
    </div>
  );
}

const REACTIONS = [
  { emoji: "ğŸ‘", label: "ã„ã„ã­" },
  { emoji: "ğŸ¤”", label: "è€ƒãˆã•ã›ã‚‰ã‚Œã‚‹" },
  { emoji: "ğŸ’¡", label: "ãªã‚‹ã»ã©" },
  { emoji: "â¤ï¸", label: "ã™ã" },
  { emoji: "ğŸ”¥", label: "ç†±ã„" },
];

function CommentSection({ articleId }) {
  const [comments, setComments] = useState([]);
  const [reactions, setReactions] = useState({});
  const [myReactions, setMyReactions] = useState({});
  const [name, setName] = useState("");
  const [text, setText] = useState("");
  const [role, setRole] = useState("parent");
  const [loading, setLoading] = useState(true);
  const [submitting, setSubmitting] = useState(false);
  const storageKey = `comments:${articleId}`;
  const reactionKey = `reactions:${articleId}`;
  const myReactionKey = `my-reactions:${articleId}`;

  // Load from storage
  useEffect(() => {
    const load = async () => {
      setLoading(true);
      try {
        const [cRes, rRes, mrRes] = await Promise.all([
          window.storage.get(storageKey, true).catch(() => null),
          window.storage.get(reactionKey, true).catch(() => null),
          window.storage.get(myReactionKey).catch(() => null),
        ]);
        if (cRes?.value) setComments(JSON.parse(cRes.value));
        if (rRes?.value) setReactions(JSON.parse(rRes.value));
        if (mrRes?.value) setMyReactions(JSON.parse(mrRes.value));
      } catch (e) {
        console.error("Storage load error:", e);
      }
      setLoading(false);
    };
    load();
  }, [articleId]);

  const handleReaction = async (emoji) => {
    const already = myReactions[emoji];
    const newMy = { ...myReactions, [emoji]: !already };
    const newR = { ...reactions };
    newR[emoji] = (newR[emoji] || 0) + (already ? -1 : 1);
    if (newR[emoji] <= 0) delete newR[emoji];
    setMyReactions(newMy);
    setReactions(newR);
    try {
      await window.storage.set(reactionKey, JSON.stringify(newR), true);
      await window.storage.set(myReactionKey, JSON.stringify(newMy));
    } catch (e) { console.error(e); }
  };

  const handleSubmit = async () => {
    if (!text.trim() || !name.trim()) return;
    setSubmitting(true);
    const newComment = {
      id: Date.now().toString(),
      name: name.trim(),
      role,
      text: text.trim(),
      time: new Date().toLocaleString("ja-JP"),
    };
    const updated = [newComment, ...comments];
    setComments(updated);
    setText("");
    try {
      await window.storage.set(storageKey, JSON.stringify(updated), true);
    } catch (e) { console.error(e); }
    setSubmitting(false);
  };

  const roleLabels = { parent: "ä¿è­·è€…", child: "å­ã©ã‚‚", teacher: "å…ˆç”Ÿ", other: "ãã®ä»–" };
  const roleColors = { parent: "#059669", child: "#EA580C", teacher: "#2563EB", other: "#8B7355" };

  return (
    <div style={{
      background: "#fff", borderRadius: 20,
      border: "1px solid #E8E0D4", overflow: "hidden",
      boxShadow: "0 4px 16px rgba(26,18,7,0.04)",
      marginTop: 20,
    }}>
      <div style={{ padding: "24px 24px 28px" }}>
        {/* Reactions */}
        <div style={{ marginBottom: 24 }}>
          <div style={{
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 13, fontWeight: 800, color: "#1A1207", marginBottom: 12,
          }}>ã“ã®è¨˜äº‹ã©ã†ã ã£ãŸï¼Ÿ</div>
          <div style={{ display: "flex", gap: 8, flexWrap: "wrap" }}>
            {REACTIONS.map(r => {
              const count = reactions[r.emoji] || 0;
              const active = myReactions[r.emoji];
              return (
                <button key={r.emoji} onClick={() => handleReaction(r.emoji)} style={{
                  display: "flex", alignItems: "center", gap: 6,
                  padding: "8px 14px", borderRadius: 24,
                  border: active ? "2px solid #F97316" : "1px solid #E8E0D4",
                  background: active ? "#FFF7ED" : "#FFFCF7",
                  cursor: "pointer", transition: "all 0.2s ease",
                  transform: active ? "scale(1.05)" : "scale(1)",
                }}>
                  <span style={{ fontSize: 18 }}>{r.emoji}</span>
                  <span style={{
                    fontFamily: "'Zen Kaku Gothic New', sans-serif",
                    fontSize: 11, fontWeight: 600,
                    color: active ? "#EA580C" : "#8B7355",
                  }}>{r.label}</span>
                  {count > 0 && (
                    <span style={{
                      fontFamily: "'Zen Kaku Gothic New', sans-serif",
                      fontSize: 11, fontWeight: 800,
                      color: active ? "#EA580C" : "#A0947E",
                      background: active ? "#FDBA7422" : "#F5F0E8",
                      padding: "1px 7px", borderRadius: 10,
                    }}>{count}</span>
                  )}
                </button>
              );
            })}
          </div>
        </div>

        {/* Divider */}
        <div style={{ height: 1, background: "#F0EBE2", margin: "0 0 24px" }} />

        {/* Comment form */}
        <div style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 13, fontWeight: 800, color: "#1A1207", marginBottom: 14,
        }}>ğŸ’¬ ã¿ã‚“ãªã®ã‚³ãƒ¡ãƒ³ãƒˆ</div>

        <div style={{
          background: "#F9F4EC", borderRadius: 14, padding: "18px 18px 14px",
          marginBottom: 20,
        }}>
          <div style={{ display: "flex", gap: 10, marginBottom: 12, flexWrap: "wrap" }}>
            <input type="text" placeholder="ãªã¾ãˆï¼ˆãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã§ã‚‚OKï¼‰"
              value={name} onChange={e => setName(e.target.value)}
              style={{
                flex: "1 1 120px", padding: "8px 14px", borderRadius: 10,
                border: "1px solid #D4C5AE", background: "#fff",
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 13, color: "#1A1207", outline: "none",
              }}
            />
            <div style={{ display: "flex", gap: 4 }}>
              {Object.entries(roleLabels).map(([k, v]) => (
                <button key={k} onClick={() => setRole(k)} style={{
                  padding: "6px 10px", borderRadius: 12, border: "none", cursor: "pointer",
                  fontFamily: "'Zen Kaku Gothic New', sans-serif",
                  fontSize: 10, fontWeight: role === k ? 700 : 500,
                  background: role === k ? roleColors[k] + "18" : "transparent",
                  color: role === k ? roleColors[k] : "#A0947E",
                  transition: "all 0.15s ease",
                }}>{v}</button>
              ))}
            </div>
          </div>
          <textarea
            placeholder="ã“ã®è¨˜äº‹ã‚’èª­ã‚“ã§æ€ã£ãŸã“ã¨ã€è¦ªå­ã§è©±ã—ãŸã“ã¨ã€è³ªå•ãªã©ã‚’æ›¸ã„ã¦ã¿ã‚ˆã† âœï¸"
            value={text} onChange={e => setText(e.target.value)}
            rows={3}
            style={{
              width: "100%", padding: "10px 14px", borderRadius: 10,
              border: "1px solid #D4C5AE", background: "#fff",
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 13, color: "#1A1207", lineHeight: 1.7,
              resize: "vertical", outline: "none",
            }}
          />
          <div style={{ display: "flex", justifyContent: "flex-end", marginTop: 10 }}>
            <button onClick={handleSubmit}
              disabled={!text.trim() || !name.trim() || submitting}
              style={{
                padding: "8px 20px", borderRadius: 20, border: "none",
                background: (!text.trim() || !name.trim()) ? "#D4C5AE" : "linear-gradient(135deg, #F97316, #EA580C)",
                color: "#fff", cursor: (!text.trim() || !name.trim()) ? "default" : "pointer",
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 12, fontWeight: 700,
                boxShadow: (text.trim() && name.trim()) ? "0 2px 8px rgba(249,115,22,0.3)" : "none",
                transition: "all 0.2s ease",
                opacity: submitting ? 0.6 : 1,
              }}
            >{submitting ? "é€ä¿¡ä¸­â€¦" : "ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹"}</button>
          </div>
        </div>

        {/* Comment list */}
        {loading ? (
          <div style={{
            textAlign: "center", padding: "20px",
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 12, color: "#A0947E",
          }}>èª­ã¿è¾¼ã¿ä¸­â€¦</div>
        ) : comments.length === 0 ? (
          <div style={{
            textAlign: "center", padding: "28px 20px",
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            color: "#A0947E",
          }}>
            <div style={{ fontSize: 28, marginBottom: 8 }}>ğŸŒ±</div>
            <div style={{ fontSize: 12 }}>ã¾ã ã‚³ãƒ¡ãƒ³ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æœ€åˆã®ä¸€äººã«ãªã‚ã†ï¼</div>
          </div>
        ) : (
          <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
            {comments.map((c, i) => (
              <div key={c.id} style={{
                display: "flex", gap: 12, alignItems: "flex-start",
                animation: i === 0 ? "fadeSlideUp 0.3s ease" : "none",
              }}>
                <div style={{
                  width: 34, height: 34, borderRadius: "50%", flexShrink: 0,
                  background: `${roleColors[c.role] || "#8B7355"}18`,
                  display: "flex", alignItems: "center", justifyContent: "center",
                  fontFamily: "'Zen Kaku Gothic New', sans-serif",
                  fontSize: 13, fontWeight: 800,
                  color: roleColors[c.role] || "#8B7355",
                }}>{c.name.charAt(0)}</div>
                <div style={{ flex: 1, minWidth: 0 }}>
                  <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 4 }}>
                    <span style={{
                      fontFamily: "'Zen Kaku Gothic New', sans-serif",
                      fontSize: 12, fontWeight: 700, color: "#1A1207",
                    }}>{c.name}</span>
                    <span style={{
                      padding: "1px 7px", borderRadius: 8,
                      background: `${roleColors[c.role] || "#8B7355"}12`,
                      fontFamily: "'Zen Kaku Gothic New', sans-serif",
                      fontSize: 9, fontWeight: 700,
                      color: roleColors[c.role] || "#8B7355",
                    }}>{roleLabels[c.role] || "ãã®ä»–"}</span>
                    <span style={{
                      fontFamily: "'Zen Kaku Gothic New', sans-serif",
                      fontSize: 10, color: "#C5B9A5",
                    }}>{c.time}</span>
                  </div>
                  <div style={{
                    fontFamily: "'Zen Kaku Gothic New', sans-serif",
                    fontSize: 13, lineHeight: 1.7, color: "#2D2416",
                    background: "#F9F4EC", borderRadius: 12,
                    padding: "10px 14px",
                  }}>{c.text}</div>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  );
}

function ArticleDetail({ article, onBack, showComments = false, articles, onSelect, onTagClick }) {
  const topRef = useRef(null);
  const color = CATEGORY_COLORS[article.category] || "#6B5D4A";
  const label = CATEGORY_LABELS[article.category] || "";

  useEffect(() => {
    topRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [article]);

  const renderBlock = (block, i) => {
    if (block.type === "text") {
      return (
        <p key={i} style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 15, lineHeight: 1.85, color: "#2D2416", margin: "0 0 18px",
        }}>{block.content}</p>
      );
    }
    if (block.type === "heading") {
      return (
        <h3 key={i} style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 16, fontWeight: 800, color: "#1A1207",
          margin: "28px 0 12px", paddingLeft: 14,
          borderLeft: `4px solid ${color}`,
        }}>{block.content}</h3>
      );
    }
    if (block.type === "quote") {
      return (
        <blockquote key={i} style={{
          margin: "20px 0", padding: "16px 20px",
          background: "#F9F4EC", borderLeft: `4px solid ${color}`,
          borderRadius: "0 12px 12px 0",
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 14, lineHeight: 1.8, color: "#2D2416", fontStyle: "italic",
        }}>
          <div>{block.content}</div>
          {block.source && <div style={{ marginTop: 8, fontSize: 12, color: "#8B7355", fontStyle: "normal" }}>â€”â€” {block.source}</div>}
        </blockquote>
      );
    }
    if (block.type === "callout") {
      const bgMap = { info: "#EFF6FF", warning: "#FFFBEB", success: "#F0FDF4", pink: "#FFF1F2" };
      const borderMap = { info: "#3B82F6", warning: "#F59E0B", success: "#10B981", pink: "#F43F5E" };
      const bg = bgMap[block.style] || bgMap.info;
      const border = borderMap[block.style] || borderMap.info;
      return (
        <div key={i} style={{
          margin: "20px 0", padding: "16px 20px",
          background: bg, border: `1px solid ${border}33`,
          borderRadius: 12, borderLeft: `4px solid ${border}`,
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
        }}>
          {block.title && <div style={{ fontSize: 13, fontWeight: 800, color: border, marginBottom: 6 }}>{block.title}</div>}
          <div style={{ fontSize: 14, lineHeight: 1.75, color: "#2D2416" }}>{block.content}</div>
        </div>
      );
    }
    if (block.type === "stat") {
      const statItems = block.items || [{ label: block.label, value: block.value, source: block.source }];
      return (
        <div key={i} style={{ margin: "20px 0" }}>
          <div style={{ display: "flex", flexWrap: "wrap", gap: 12 }}>
            {statItems.map((s, j) => (
              <div key={j} style={{
                flex: "1 1 140px", background: "#fff", border: "1px solid #E8E0D4",
                borderRadius: 14, padding: "18px 16px", textAlign: "center",
                boxShadow: "0 2px 8px rgba(26,18,7,0.04)",
              }}>
                <div style={{
                  fontFamily: "'Zen Kaku Gothic New', sans-serif",
                  fontSize: 28, fontWeight: 900, color: color,
                  letterSpacing: "-0.02em",
                }}>{s.value}</div>
                <div style={{
                  fontFamily: "'Zen Kaku Gothic New', sans-serif",
                  fontSize: 11, fontWeight: 600, color: "#6B5D4A", marginTop: 4,
                }}>{s.label}</div>
              </div>
            ))}
          </div>
          {(block.source || (statItems.length === 1 && statItems[0].source)) && <div style={{
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 10, color: "#A89B8C", marginTop: 6, textAlign: "right",
          }}>å‡ºå…¸: {block.source || statItems[0].source}</div>}
        </div>
      );
    }
    if (block.type === "chart") {
      if (!block.data || block.data.length === 0) return null;
      const maxVal = Math.max(...block.data.map(d => d.value));
      return (
        <div key={i} style={{ margin: "24px 0" }}>
          {block.title && <div style={{
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 13, fontWeight: 700, color: "#6B5D4A", marginBottom: 12,
          }}>{block.title}</div>}
          <div style={{
            background: "#fff", border: "1px solid #E8E0D4", borderRadius: 14,
            padding: "20px 16px", boxShadow: "0 2px 8px rgba(26,18,7,0.04)",
          }}>
            {block.data.map((d, j) => (
              <div key={j} style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: j < block.data.length - 1 ? 10 : 0 }}>
                <div style={{
                  width: 80, textAlign: "right", fontSize: 11, fontWeight: 600,
                  fontFamily: "'Zen Kaku Gothic New', sans-serif", color: "#6B5D4A",
                  flexShrink: 0,
                }}>{d.label}</div>
                <div style={{ flex: 1, height: 24, background: "#F5F0E8", borderRadius: 6, overflow: "hidden" }}>
                  <div style={{
                    width: `${(d.value / maxVal) * 100}%`,
                    height: "100%", borderRadius: 6,
                    background: `linear-gradient(90deg, ${d.color || color}, ${d.color || color}AA)`,
                    transition: "width 0.6s ease",
                  }} />
                </div>
                <div style={{
                  width: 48, fontSize: 12, fontWeight: 700,
                  fontFamily: "'Zen Kaku Gothic New', sans-serif", color: "#2D2416",
                  flexShrink: 0,
                }}>{d.value}{block.unit || ""}</div>
              </div>
            ))}
          </div>
          {block.source && <div style={{
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 10, color: "#A89B8C", marginTop: 6, textAlign: "right",
          }}>å‡ºå…¸: {block.source}</div>}
        </div>
      );
    }
    if (block.type === "table") {
      if (!block.headers || !block.rows) return null;
      return (
        <div key={i} style={{ margin: "20px 0", overflowX: "auto" }}>
          <div style={{
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 12, fontWeight: 700, color: "#6B5D4A", marginBottom: 8,
          }}>{block.title}</div>
          <table style={{
            width: "100%", borderCollapse: "collapse",
            fontFamily: "'Zen Kaku Gothic New', sans-serif", fontSize: 12,
          }}>
            <thead>
              <tr>{block.headers.map((h, j) => (
                <th key={j} style={{
                  padding: "9px 12px", textAlign: j === 0 ? "left" : "center",
                  background: "#1A1207", color: "#FFFCF7", fontWeight: 700, fontSize: 11,
                  borderRadius: j === 0 ? "8px 0 0 0" : j === block.headers.length - 1 ? "0 8px 0 0" : 0,
                }}>{h}</th>
              ))}</tr>
            </thead>
            <tbody>
              {block.rows.map((row, ri) => (
                <tr key={ri} style={{ background: ri % 2 === 0 ? "#FFFCF7" : "#F9F4EC" }}>
                  {row.map((cell, ci) => (
                    <td key={ci} style={{
                      padding: "8px 12px", textAlign: ci === 0 ? "left" : "center",
                      borderBottom: "1px solid #E8E0D4", fontWeight: ci === 0 ? 600 : 400,
                      color: ci === 2 && typeof cell === "string" ? (cell.startsWith("+") ? "#059669" : cell.startsWith("âˆ’") ? "#E8453C" : "#6B5D4A") : "#2D2416",
                    }}>{cell}</td>
                  ))}
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      );
    }
    if (block.type === "list") {
      if (!block.items) return null;
      return (
        <ul key={i} style={{ margin: "12px 0 18px", paddingLeft: 24 }}>
          {block.items.map((item, j) => (
            <li key={j} style={{
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 14, lineHeight: 1.8, color: "#2D2416", marginBottom: 6,
            }}>{item}</li>
          ))}
        </ul>
      );
    }
    return null;
  };

  return (
    <div ref={topRef} style={{ animation: "fadeIn 0.4s ease" }}>
      <button onClick={onBack} style={{
        display: "inline-flex", alignItems: "center", gap: 6,
        padding: "7px 14px", borderRadius: 20,
        border: "1px solid #D4C5AE", background: "#FFFCF7",
        cursor: "pointer", marginBottom: 20,
        fontFamily: "'Zen Kaku Gothic New', sans-serif",
        fontSize: 12, fontWeight: 600, color: "#6B5D4A",
      }}>â† è¨˜äº‹ä¸€è¦§ã«ã‚‚ã©ã‚‹</button>

      <div style={{
        background: "#fff", borderRadius: 20,
        border: "1px solid #E8E0D4", overflow: "hidden",
        boxShadow: "0 4px 16px rgba(26,18,7,0.06)",
      }}>
        <div style={{ height: 5, background: `linear-gradient(90deg, ${color}, ${color}66)` }} />
        <div style={{ padding: "28px 24px 32px" }}>
          <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 14 }}>
            <span style={{
              padding: "3px 12px", borderRadius: 12,
              background: `${color}12`, color,
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 11, fontWeight: 700,
            }}>{label}</span>
            <span style={{
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 11, color: "#A0947E",
            }}>{article.date}</span>
          </div>

          <div style={{ display: "flex", gap: 14, alignItems: "flex-start", marginBottom: 24 }}>
            <span style={{ fontSize: 38, lineHeight: 1, flexShrink: 0 }}>{article.heroEmoji}</span>
            <h1 style={{
              fontFamily: "'Zen Kaku Gothic New', 'Noto Sans JP', sans-serif",
              fontSize: "clamp(18px, 4vw, 26px)", fontWeight: 900,
              color: "#1A1207", lineHeight: 1.4, letterSpacing: "-0.02em", margin: 0,
            }}>{article.title}</h1>
          </div>

          <div style={{
            display: "flex", alignItems: "center", gap: 10,
            padding: "12px 16px", borderRadius: 12,
            background: "#F9F4EC", marginBottom: 28,
          }}>
            <div style={{
              width: 32, height: 32, borderRadius: "50%",
              background: "linear-gradient(135deg, #F97316, #EA580C)",
              display: "flex", alignItems: "center", justifyContent: "center",
              fontSize: 14, color: "#fff", fontWeight: 800,
            }}>T</div>
            <div>
              <div style={{
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 12, fontWeight: 700, color: "#1A1207",
              }}>æ¢ç©¶æ•™å®¤TRAIL ç·¨é›†éƒ¨</div>
              <div style={{
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 10, color: "#8B7355",
              }}>ã€Œè€ƒãˆã‚‹åŠ›ã€ã‚’è‚²ã¦ã‚‹è¦–ç‚¹ã§ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’è§£èª¬</div>
            </div>
            <span style={{
              marginLeft: "auto", padding: "4px 10px", borderRadius: 10,
              background: "#F5F0E8", fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 11, color: "#8B7355", fontWeight: 600, whiteSpace: "nowrap",
            }}>{getReadingTime(article)}åˆ†ã§èª­ã‚ã‚‹</span>
          </div>

          {/* Body */}
          {article.body.map((block, i) => renderBlock(block, i))}

          {/* Special sections */}
          {article.tankyuPoint && (
            <SpecialBox type="tankyu" title="TRAILæ¢ç©¶ãƒã‚¤ãƒ³ãƒˆ" icon="ğŸ§­" content={article.tankyuPoint} />
          )}
          {article.aiAngle && (
            <SpecialBox type="ai" title="AIæ™‚ä»£ã®è¦–ç‚¹" icon="ğŸ¤–" content={article.aiAngle} />
          )}
          {article.oyakoTalk && (
            <SpecialBox type="oyako" title="è¦ªå­ã§è©±ãã†" icon="ğŸ’¬" content={article.oyakoTalk} />
          )}

          {/* Related video */}
          {article.videoUrl && <VideoEmbed url={article.videoUrl} />}

          {/* Tags */}
          <div style={{
            display: "flex", gap: 7, flexWrap: "wrap",
            marginTop: 24, paddingTop: 18, borderTop: "1px solid #E8E0D4",
          }}>
            {(article.tags || []).map(tag => (
              <span key={tag} onClick={() => onTagClick && onTagClick(tag)} style={{
                padding: "4px 11px", borderRadius: 12, background: "#F5F0E8",
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 11, color: "#8B7355",
                cursor: onTagClick ? "pointer" : "default", transition: "all 0.2s ease",
              }}
              onMouseEnter={e => { if (onTagClick) { e.currentTarget.style.background = "#EA580C"; e.currentTarget.style.color = "#fff"; } }}
              onMouseLeave={e => { e.currentTarget.style.background = "#F5F0E8"; e.currentTarget.style.color = "#8B7355"; }}
              >#{tag}</span>
            ))}
          </div>

          {/* Share buttons */}
          <ShareButtons article={article} />
        </div>
      </div>

      {/* Related articles */}
      <RelatedArticles currentArticle={article} articles={articles} onSelect={onSelect} />

      {/* Comments & Reactions */}
      {showComments && <CommentSection articleId={article.id} />}
    </div>
  );
}

function Sidebar({ articles }) {
  const articleCount = articles ? articles.length : 0;
  const dateKeys = articles ? [...new Set(articles.map(a => a.dateKey))].sort() : [];
  const firstDate = dateKeys.length > 0 ? `2/${parseInt(dateKeys[0].slice(2), 10)}` : "";
  const lastDate = dateKeys.length > 0 ? `2/${parseInt(dateKeys[dateKeys.length - 1].slice(2), 10)}` : "";
  const dateRange = firstDate && lastDate ? `ï¼ˆ${firstDate}ã€œ${lastDate}ï¼‰` : "";

  return (
    <aside style={{ display: "flex", flexDirection: "column", gap: 18 }}>
      {/* Article count */}
      <div style={{
        background: "linear-gradient(135deg, #FFF7ED, #FEF3E2)",
        borderRadius: 14, padding: "18px 20px",
        border: "1px solid #F9731622",
        textAlign: "center",
      }}>
        <div style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 36, fontWeight: 900, color: "#EA580C",
        }}>{articleCount}</div>
        <div style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 12, color: "#8B7355", fontWeight: 600,
        }}>è¨˜äº‹ã‚’å…¬é–‹ä¸­{dateRange}</div>
      </div>

      {/* About TRAIL */}
      <div id="about" style={{
        background: "#fff", borderRadius: 14,
        border: "1px solid #E8E0D4", padding: "20px 18px",
      }}>
        <div style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 13, fontWeight: 800, color: "#1A1207",
          marginBottom: 12, display: "flex", alignItems: "center", gap: 8,
        }}>ğŸ” æ¢ç©¶æ•™å®¤TRAILã¨ã¯</div>
        <p style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 12, color: "#6B5D4A", lineHeight: 1.75, margin: "0 0 12px",
        }}>ã€Œå•ã„ã‚’ç«‹ã¦ã‚‹åŠ›ã€ã‚’è‚²ã¦ã‚‹å€‹åˆ¥æŒ‡å°æ•™å®¤ã€‚AIæ™‚ä»£ã‚’ç”ŸãæŠœããŸã‚ã«å¿…è¦ãªã€è‡ªåˆ†ã§è€ƒãˆã€æ¢ç©¶ã™ã‚‹åŠ›ã‚’è‚²ã¦ã¾ã™ã€‚</p>
        {[
          ["ğŸ‘¤", "å€‹åˆ¥æŒ‡å°", "1å¯¾1ã§ã€Œå•ã„ã€ã‚’æ·±ã‚ã‚‹"],
          ["ğŸ‘¥", "å°‘äººæ•°åˆ¶", "3ã€œ6äººã§å¯¾è©±çš„ã«å­¦ã¶"],
          ["ğŸ¤–", "AIæ™‚ä»£å¯¾å¿œ", "AIã‚’ä½¿ã„ã“ãªã™åŠ›ã‚’è‚²æˆ"],
        ].map(([icon, title, desc]) => (
          <div key={title} style={{
            display: "flex", gap: 10, alignItems: "flex-start",
            padding: "8px 10px", borderRadius: 10, background: "#F9F4EC",
            marginBottom: 6,
          }}>
            <span style={{ fontSize: 16, flexShrink: 0 }}>{icon}</span>
            <div>
              <div style={{ fontFamily: "'Zen Kaku Gothic New', sans-serif", fontSize: 11, fontWeight: 700, color: "#1A1207" }}>{title}</div>
              <div style={{ fontFamily: "'Zen Kaku Gothic New', sans-serif", fontSize: 10, color: "#8B7355" }}>{desc}</div>
            </div>
          </div>
        ))}
      </div>

      {/* Category Guide */}
      <div style={{
        background: "#fff", borderRadius: 14,
        border: "1px solid #E8E0D4", padding: "20px 18px",
      }}>
        <div style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 13, fontWeight: 800, color: "#1A1207", marginBottom: 12,
        }}>ğŸ“‚ ã‚«ãƒ†ã‚´ãƒªã‚¬ã‚¤ãƒ‰</div>
        {[
          { icon: "ğŸ¯", name: "å…¥è©¦é€Ÿå ±", desc: "å‡ºé¡˜ãƒ»å€ç‡ãƒ»åˆæ ¼é€Ÿå ±ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§" },
          { icon: "ğŸ«", name: "å­¦æ ¡æƒ…å ±", desc: "æ–°è¨­æ ¡ãƒ»ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ å¤‰æ›´ãƒ»å­¦æ ¡ã®ç‰¹è‰²" },
          { icon: "ğŸ”", name: "æ¢ç©¶ã‚³ãƒ©ãƒ ", desc: "ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®è£å´ã‚’ã€Œæ¢ç©¶ã€ã®ç›®ã§æ·±æ˜ã‚Š" },
          { icon: "ğŸ¤–", name: "AIÃ—æ•™è‚²", desc: "AIæ™‚ä»£ã«å¿…è¦ãªå­¦ã³ã¨æœ€æ–°å‹•å‘" },
          { icon: "ğŸ’¬", name: "è¦ªå­ã§è€ƒãˆã‚‹", desc: "å®¶åº­ã§ä½¿ãˆã‚‹å¯¾è©±ãƒã‚¿ãƒ»æ¢ç©¶ãƒãƒ£ãƒ¬ãƒ³ã‚¸" },
        ].map(cat => (
          <div key={cat.name} style={{
            display: "flex", gap: 10, padding: "8px 0",
            borderBottom: "1px solid #F0EBE2",
          }}>
            <span style={{ fontSize: 14, flexShrink: 0 }}>{cat.icon}</span>
            <div>
              <div style={{ fontFamily: "'Zen Kaku Gothic New', sans-serif", fontSize: 12, fontWeight: 700, color: "#1A1207" }}>{cat.name}</div>
              <div style={{ fontFamily: "'Zen Kaku Gothic New', sans-serif", fontSize: 10, color: "#8B7355" }}>{cat.desc}</div>
            </div>
          </div>
        ))}
      </div>

      {/* Editorial policy */}
      <div style={{
        background: "linear-gradient(135deg, #1A1207 0%, #2D2416 100%)",
        borderRadius: 14, padding: "20px 18px", color: "#FFFCF7",
      }}>
        <div style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 13, fontWeight: 800, marginBottom: 12,
        }}>âœï¸ ç·¨é›†æ–¹é‡</div>
        {[
          "åå·®å€¤ã«æŒ¯ã‚Šå›ã•ã‚Œãªã„è³¢ã„é¸æŠã‚’å¿œæ´ã—ã¾ã™",
          "ã™ã¹ã¦ã®è¨˜äº‹ã«ã€Œæ¢ç©¶ãƒã‚¤ãƒ³ãƒˆã€ã‚’ã¤ã‘ã€è¦ªå­ã®å¯¾è©±ã®ãã£ã‹ã‘ã‚’ã¤ãã‚Šã¾ã™",
          "AIã¨ä¸€ç·’ã«è€ƒãˆã‚‹åŠ›ã‚’è‚²ã¦ã‚‹è¦–ç‚¹ã‚’å¤§åˆ‡ã«ã—ã¾ã™",
          "å­ã©ã‚‚ãŒè‡ªåˆ†ã§èª­ã‚“ã§ã‚‚ç†è§£ã§ãã‚‹ã‚„ã•ã—ã„æ—¥æœ¬èªã‚’å¿ƒãŒã‘ã¾ã™",
        ].map((text, i) => (
          <div key={i} style={{ display: "flex", gap: 8, marginBottom: 10 }}>
            <span style={{ color: "#F97316", fontSize: 10, marginTop: 4, flexShrink: 0 }}>â—</span>
            <span style={{
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 11, lineHeight: 1.65, color: "#D4C5AE",
            }}>{text}</span>
          </div>
        ))}
      </div>
    </aside>
  );
}

function Footer() {
  return (
    <footer style={{ background: "#1A1207", padding: "36px 20px 28px", marginTop: 40 }}>
      <div style={{ maxWidth: 960, margin: "0 auto", textAlign: "center" }}>
        <div style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 16, fontWeight: 900, color: "#FFFCF7", marginBottom: 6,
        }}>ğŸ” ãƒˆãƒ¬ã‚¤ãƒ«æ¢ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹</div>
        <div style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 11, color: "#8B7355", marginBottom: 20,
        }}>æ¢ç©¶æ•™å®¤TRAILãŒå±Šã‘ã‚‹ã€è¦ªå­ã§èª­ã‚€ä¸­å­¦å—é¨“ãƒ‹ãƒ¥ãƒ¼ã‚¹</div>
        <div style={{
          fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 10, color: "#6B5D4A",
        }}>Â© 2026 æ¢ç©¶æ•™å®¤TRAIL. All rights reserved.</div>
      </div>
    </footer>
  );
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// ğŸ“‹ ç·¨é›†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

function DashboardField({ label, value, onChange, multiline, small }) {
  const common = {
    width: "100%", padding: small ? "8px 12px" : "10px 14px",
    borderRadius: 10, border: "1px solid #D4C5AE",
    background: "#FFFCF7", fontFamily: "'Zen Kaku Gothic New', sans-serif",
    fontSize: 13, color: "#1A1207", outline: "none",
    transition: "border-color 0.2s",
  };
  return (
    <div style={{ marginBottom: 14 }}>
      <label style={{
        display: "block", marginBottom: 5,
        fontFamily: "'Zen Kaku Gothic New', sans-serif",
        fontSize: 11, fontWeight: 700, color: "#8B7355",
      }}>{label}</label>
      {multiline ? (
        <textarea value={value} onChange={e => onChange(e.target.value)}
          rows={4} style={{ ...common, resize: "vertical", lineHeight: 1.7 }}
          onFocus={e => e.target.style.borderColor = "#F97316"}
          onBlur={e => e.target.style.borderColor = "#D4C5AE"}
        />
      ) : (
        <input type="text" value={value} onChange={e => onChange(e.target.value)}
          style={common}
          onFocus={e => e.target.style.borderColor = "#F97316"}
          onBlur={e => e.target.style.borderColor = "#D4C5AE"}
        />
      )}
    </div>
  );
}

function DashboardBodyEditor({ body, onChange }) {
  const updateBlock = (idx, field, val) => {
    const next = [...body];
    next[idx] = { ...next[idx], [field]: val };
    onChange(next);
  };

  return (
    <div style={{ marginBottom: 14 }}>
      <label style={{
        display: "block", marginBottom: 8,
        fontFamily: "'Zen Kaku Gothic New', sans-serif",
        fontSize: 11, fontWeight: 700, color: "#8B7355",
      }}>æœ¬æ–‡ãƒ–ãƒ­ãƒƒã‚¯</label>
      {body.map((block, i) => (
        <div key={i} style={{
          background: "#F9F4EC", borderRadius: 10, padding: "12px 14px",
          marginBottom: 8, position: "relative",
        }}>
          <div style={{
            display: "flex", alignItems: "center", gap: 8, marginBottom: 8,
          }}>
            <span style={{
              padding: "2px 8px", borderRadius: 8,
              background: block.type === "heading" ? "#EA580C22" : block.type === "table" ? "#2563EB22" : "#1A120711",
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 10, fontWeight: 700,
              color: block.type === "heading" ? "#EA580C" : block.type === "table" ? "#2563EB" : "#6B5D4A",
            }}>
              {block.type === "heading" ? "è¦‹å‡ºã—" : block.type === "table" ? "è¡¨" : block.type === "chart" ? "ğŸ“Šã‚°ãƒ©ãƒ•" : block.type === "stat" ? "ğŸ“ˆæ•°å­—" : block.type === "quote" ? "ğŸ’¬å¼•ç”¨" : block.type === "callout" ? "ğŸ“Œæ³¨ç›®" : "æœ¬æ–‡"}
            </span>
            <span style={{
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 10, color: "#A0947E",
            }}>ãƒ–ãƒ­ãƒƒã‚¯ {i + 1}</span>
          </div>
          {(block.type === "table" || block.type === "chart") ? (
            <div style={{
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 11, color: "#8B7355", fontStyle: "italic",
            }}>ï¼ˆ{block.type === "table" ? "è¡¨" : "ã‚°ãƒ©ãƒ•"}ã¯ã‚³ãƒ¼ãƒ‰å†…ã§ç›´æ¥ç·¨é›†ã—ã¦ãã ã•ã„ï¼‰</div>
          ) : block.type === "stat" && !block.content ? (
            <div style={{ display: "flex", gap: 8 }}>
              <input value={block.label || ""} onChange={e => updateBlock(i, "label", e.target.value)}
                placeholder="ãƒ©ãƒ™ãƒ«" style={{ flex: 1, padding: "8px 10px", borderRadius: 8, border: "1px solid #D4C5AE", background: "#fff", fontFamily: "'Zen Kaku Gothic New', sans-serif", fontSize: 12, outline: "none" }} />
              <input value={block.value || ""} onChange={e => updateBlock(i, "value", e.target.value)}
                placeholder="æ•°å€¤" style={{ width: 100, padding: "8px 10px", borderRadius: 8, border: "1px solid #D4C5AE", background: "#fff", fontFamily: "'Zen Kaku Gothic New', sans-serif", fontSize: 12, fontWeight: 700, outline: "none" }} />
            </div>
          ) : (
            <textarea
              value={block.content || ""}
              onChange={e => updateBlock(i, "content", e.target.value)}
              rows={block.type === "heading" ? 1 : 3}
              style={{
                width: "100%", padding: "8px 10px", borderRadius: 8,
                border: "1px solid #D4C5AE", background: "#fff",
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 12, color: "#1A1207", lineHeight: 1.7,
                resize: "vertical", outline: "none",
                fontWeight: block.type === "heading" ? 700 : 400,
              }}
              onFocus={e => e.target.style.borderColor = "#F97316"}
              onBlur={e => e.target.style.borderColor = "#D4C5AE"}
            />
          )}
        </div>
      ))}
    </div>
  );
}

function ArticleEditor({ article, onUpdate, onClose }) {
  const [draft, setDraft] = useState(JSON.parse(JSON.stringify(article)));
  const [saved, setSaved] = useState(false);

  const set = (field) => (val) => setDraft(d => ({ ...d, [field]: val }));

  const handleSave = () => {
    onUpdate(draft);
    setSaved(true);
    setTimeout(() => setSaved(false), 2000);
  };

  const color = CATEGORY_COLORS[draft.category] || "#6B5D4A";

  return (
    <div style={{ animation: "fadeIn 0.3s ease" }}>
      {/* Header bar */}
      <div style={{
        display: "flex", alignItems: "center", justifyContent: "space-between",
        marginBottom: 20, flexWrap: "wrap", gap: 10,
      }}>
        <button onClick={onClose} style={{
          display: "inline-flex", alignItems: "center", gap: 6,
          padding: "7px 14px", borderRadius: 20,
          border: "1px solid #D4C5AE", background: "#fff",
          cursor: "pointer", fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 12, fontWeight: 600, color: "#6B5D4A",
        }}>â† ä¸€è¦§ã«æˆ»ã‚‹</button>
        <button onClick={handleSave} style={{
          display: "inline-flex", alignItems: "center", gap: 6,
          padding: "8px 20px", borderRadius: 20, border: "none",
          background: saved ? "#059669" : "linear-gradient(135deg, #F97316, #EA580C)",
          cursor: "pointer", fontFamily: "'Zen Kaku Gothic New', sans-serif",
          fontSize: 13, fontWeight: 700, color: "#fff",
          boxShadow: "0 2px 8px rgba(249,115,22,0.3)",
          transition: "all 0.3s ease",
        }}>{saved ? "âœ“ ä¿å­˜ã—ã¾ã—ãŸ" : "ğŸ’¾ ä¿å­˜ã™ã‚‹"}</button>
      </div>

      <div style={{
        display: "grid", gridTemplateColumns: "1fr 1fr", gap: 20,
        alignItems: "start",
      }}>
        {/* Left: Editor */}
        <div style={{
          background: "#fff", borderRadius: 16, border: "1px solid #E8E0D4",
          padding: "24px", maxHeight: "80vh", overflowY: "auto",
        }}>
          <div style={{
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 14, fontWeight: 800, color: "#1A1207", marginBottom: 18,
            display: "flex", alignItems: "center", gap: 8,
          }}>
            <span style={{ fontSize: 18 }}>{draft.heroEmoji}</span>
            è¨˜äº‹ã‚’ç·¨é›†
          </div>

          {/* Meta */}
          <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 10, marginBottom: 4 }}>
            <DashboardField label="æ—¥ä»˜" value={draft.date} onChange={set("date")} small />
            <div style={{ marginBottom: 14 }}>
              <label style={{
                display: "block", marginBottom: 5,
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 11, fontWeight: 700, color: "#8B7355",
              }}>ã‚«ãƒ†ã‚´ãƒª</label>
              <select value={draft.category} onChange={e => set("category")(e.target.value)}
                style={{
                  width: "100%", padding: "8px 12px", borderRadius: 10,
                  border: "1px solid #D4C5AE", background: "#FFFCF7",
                  fontFamily: "'Zen Kaku Gothic New', sans-serif",
                  fontSize: 13, color: "#1A1207", outline: "none",
                }}>
                {Object.entries(CATEGORY_LABELS).map(([k, v]) => (
                  <option key={k} value={k}>{v}</option>
                ))}
              </select>
            </div>
          </div>

          <DashboardField label="ã‚¿ã‚¤ãƒˆãƒ«" value={draft.title} onChange={set("title")} />
          <DashboardField label="è¦ç´„ï¼ˆä¸€è¦§è¡¨ç¤ºç”¨ï¼‰" value={draft.summary} onChange={set("summary")} multiline />

          <DashboardBodyEditor body={draft.body} onChange={set("body")} />

          <DashboardField label="ğŸ§­ æ¢ç©¶ãƒã‚¤ãƒ³ãƒˆ" value={draft.tankyuPoint || ""} onChange={set("tankyuPoint")} multiline />
          <DashboardField label="ğŸ¤– AIæ™‚ä»£ã®è¦–ç‚¹" value={draft.aiAngle || ""} onChange={set("aiAngle")} multiline />
          <DashboardField label="ğŸ’¬ è¦ªå­ã§è©±ãã†" value={draft.oyakoTalk || ""} onChange={set("oyakoTalk")} multiline />

          <DashboardField label="ã‚¿ã‚°ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰" value={(draft.tags || []).join(", ")}
            onChange={v => set("tags")(v.split(",").map(t => t.trim()).filter(Boolean))} />

          {/* Video URL */}
          <div style={{ marginBottom: 14 }}>
            <label style={{
              display: "block", marginBottom: 5,
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 11, fontWeight: 700, color: "#8B7355",
            }}>ğŸ¬ é–¢é€£å‹•ç”»ï¼ˆYouTube URLãƒ»ç©ºæ¬„ã§ã‚‚OKï¼‰</label>
            <input type="text"
              placeholder="https://www.youtube.com/watch?v=... ã¾ãŸã¯ https://youtu.be/..."
              value={draft.videoUrl || ""}
              onChange={e => set("videoUrl")(e.target.value)}
              style={{
                width: "100%", padding: "10px 14px", borderRadius: 10,
                border: "1px solid #D4C5AE", background: "#FFFCF7",
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 13, color: "#1A1207", outline: "none",
              }}
              onFocus={e => e.target.style.borderColor = "#F97316"}
              onBlur={e => e.target.style.borderColor = "#D4C5AE"}
            />
            {draft.videoUrl && !extractYouTubeId(draft.videoUrl) && (
              <div style={{
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 10, color: "#E8453C", marginTop: 4,
              }}>âš ï¸ YouTube URLã¨ã—ã¦èªè­˜ã§ãã¾ã›ã‚“</div>
            )}
            {draft.videoUrl && extractYouTubeId(draft.videoUrl) && (
              <div style={{
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 10, color: "#059669", marginTop: 4,
              }}>âœ“ å‹•ç”»ã‚’èªè­˜ã—ã¾ã—ãŸï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ç¢ºèªã§ãã¾ã™ï¼‰</div>
            )}
          </div>
        </div>

        {/* Right: Live Preview */}
        <div style={{
          background: "#FFFCF7", borderRadius: 16, border: "1px solid #E8E0D4",
          padding: "20px", maxHeight: "80vh", overflowY: "auto",
        }}>
          <div style={{
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 12, fontWeight: 700, color: "#8B7355",
            marginBottom: 14, display: "flex", alignItems: "center", gap: 6,
          }}>
            <span style={{ fontSize: 14 }}>ğŸ‘ï¸</span> ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
          </div>
          <ArticleDetail article={draft} onBack={() => {}} />
        </div>
      </div>
    </div>
  );
}

function Dashboard({ articles, onUpdateArticle }) {
  const [editingId, setEditingId] = useState(null);
  const [searchQuery, setSearchQuery] = useState("");
  const [filterCat, setFilterCat] = useState("all");
  const [filterStatus, setFilterStatus] = useState("all"); // "all" | "public" | "hidden"

  const toggleHidden = (article, e) => {
    e.stopPropagation();
    onUpdateArticle({ ...article, hidden: !article.hidden });
  };

  const filtered = articles.filter(a => {
    if (filterCat !== "all" && a.category !== filterCat) return false;
    if (filterStatus === "public" && a.hidden) return false;
    if (filterStatus === "hidden" && !a.hidden) return false;
    if (searchQuery && !a.title.includes(searchQuery) && !a.summary.includes(searchQuery)) return false;
    return true;
  });

  const hiddenCount = articles.filter(a => a.hidden).length;

  if (editingId) {
    const article = articles.find(a => a.id === editingId);
    if (article) {
      return (
        <ArticleEditor
          article={article}
          onUpdate={(updated) => { onUpdateArticle(updated); }}
          onClose={() => setEditingId(null)}
        />
      );
    }
  }

  return (
    <div style={{ animation: "fadeIn 0.3s ease" }}>
      {/* Dashboard header */}
      <div style={{
        display: "flex", alignItems: "center", justifyContent: "space-between",
        marginBottom: 20, flexWrap: "wrap", gap: 12,
      }}>
        <div>
          <div style={{
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 20, fontWeight: 900, color: "#1A1207",
          }}>ğŸ“‹ è¨˜äº‹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</div>
          <div style={{
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 12, color: "#8B7355", marginTop: 4,
          }}>å…¨{articles.length}ä»¶ï¼ˆå…¬é–‹ {articles.length - hiddenCount}ä»¶ãƒ»éå…¬é–‹ {hiddenCount}ä»¶ï¼‰</div>
        </div>
      </div>

      {/* Filters */}
      <div style={{
        display: "flex", gap: 10, marginBottom: 18, flexWrap: "wrap", alignItems: "center",
      }}>
        <input
          type="text" placeholder="ğŸ” è¨˜äº‹ã‚’æ¤œç´¢â€¦"
          value={searchQuery} onChange={e => setSearchQuery(e.target.value)}
          style={{
            padding: "8px 14px", borderRadius: 20, border: "1px solid #D4C5AE",
            background: "#fff", fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 12, color: "#1A1207", outline: "none", width: 200,
          }}
        />
        <div style={{ display: "flex", gap: 4 }}>
          {[{ id: "all", label: "ã™ã¹ã¦" }, ...Object.entries(CATEGORY_LABELS).map(([k, v]) => ({ id: k, label: v }))].map(c => (
            <button key={c.id} onClick={() => setFilterCat(c.id)} style={{
              padding: "5px 12px", borderRadius: 16, border: "none", cursor: "pointer",
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 11, fontWeight: filterCat === c.id ? 700 : 500,
              background: filterCat === c.id ? "#1A1207" : "#F5F0E8",
              color: filterCat === c.id ? "#fff" : "#6B5D4A",
            }}>{c.label}</button>
          ))}
        </div>
        <div style={{ display: "flex", gap: 4, marginLeft: 4 }}>
          {[{ id: "all", label: "å…¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹" }, { id: "public", label: "å…¬é–‹" }, { id: "hidden", label: "éå…¬é–‹" }].map(s => (
            <button key={s.id} onClick={() => setFilterStatus(s.id)} style={{
              padding: "5px 12px", borderRadius: 16, border: "none", cursor: "pointer",
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              fontSize: 11, fontWeight: filterStatus === s.id ? 700 : 500,
              background: filterStatus === s.id ? (s.id === "hidden" ? "#DC2626" : s.id === "public" ? "#059669" : "#1A1207") : "#F5F0E8",
              color: filterStatus === s.id ? "#fff" : "#6B5D4A",
            }}>{s.label}</button>
          ))}
        </div>
      </div>

      {/* Article list */}
      <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
        {filtered.map((article, i) => {
          const color = CATEGORY_COLORS[article.category] || "#6B5D4A";
          const label = CATEGORY_LABELS[article.category] || "";
          const isHidden = article.hidden;
          return (
            <div key={article.id}
              onClick={() => setEditingId(article.id)}
              style={{
                display: "flex", alignItems: "center", gap: 14,
                background: isHidden ? "#F9F4EC" : "#fff", borderRadius: 12,
                border: `1px solid ${isHidden ? "#D4C5AE" : "#E8E0D4"}`,
                padding: "14px 18px", cursor: "pointer",
                transition: "all 0.2s ease",
                opacity: isHidden ? 0.6 : 1,
                animation: `fadeSlideUp 0.3s ease ${i * 0.03}s both`,
              }}
              onMouseEnter={e => { e.currentTarget.style.borderColor = "#F97316"; e.currentTarget.style.boxShadow = "0 4px 16px rgba(249,115,22,0.1)"; e.currentTarget.style.opacity = "1"; }}
              onMouseLeave={e => { e.currentTarget.style.borderColor = isHidden ? "#D4C5AE" : "#E8E0D4"; e.currentTarget.style.boxShadow = "none"; e.currentTarget.style.opacity = isHidden ? "0.6" : "1"; }}
            >
              <span style={{ fontSize: 24, flexShrink: 0 }}>{article.heroEmoji}</span>
              <div style={{ flex: 1, minWidth: 0 }}>
                <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 4 }}>
                  <span style={{
                    padding: "1px 8px", borderRadius: 8,
                    background: `${color}15`, color,
                    fontFamily: "'Zen Kaku Gothic New', sans-serif",
                    fontSize: 10, fontWeight: 700,
                  }}>{label}</span>
                  <span style={{
                    fontFamily: "'Zen Kaku Gothic New', sans-serif",
                    fontSize: 10, color: "#A0947E",
                  }}>{article.date}</span>
                  {isHidden && <span style={{
                    padding: "1px 8px", borderRadius: 8,
                    background: "#DC262615", color: "#DC2626",
                    fontFamily: "'Zen Kaku Gothic New', sans-serif",
                    fontSize: 10, fontWeight: 700,
                  }}>éå…¬é–‹</span>}
                </div>
                <div style={{
                  fontFamily: "'Zen Kaku Gothic New', sans-serif",
                  fontSize: 13, fontWeight: 700, color: isHidden ? "#8B7355" : "#1A1207",
                  whiteSpace: "nowrap", overflow: "hidden", textOverflow: "ellipsis",
                }}>{article.title}</div>
              </div>
              <button
                onClick={(e) => toggleHidden(article, e)}
                style={{
                  padding: "6px 14px", borderRadius: 16, border: "none", cursor: "pointer",
                  fontFamily: "'Zen Kaku Gothic New', sans-serif",
                  fontSize: 11, fontWeight: 700, flexShrink: 0, transition: "all 0.2s ease",
                  background: isHidden ? "#059669" : "#DC262615",
                  color: isHidden ? "#fff" : "#DC2626",
                }}
              >{isHidden ? "å…¬é–‹ã™ã‚‹" : "éå…¬é–‹"}</button>
              <span style={{
                fontFamily: "'Zen Kaku Gothic New', sans-serif",
                fontSize: 11, color: "#EA580C", fontWeight: 600, flexShrink: 0,
              }}>ç·¨é›† â†’</span>
            </div>
          );
        })}
      </div>
    </div>
  );
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// ğŸ§­ æ¢ç©¶ãƒŠãƒ“ â€” ãƒãƒ£ãƒƒãƒˆå¼è¨˜äº‹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

function TankyuNavi({ articles, onSelectArticle }) {
  const [isOpen, setIsOpen] = useState(false);
  const [history, setHistory] = useState([]);
  const [currentKey, setCurrentKey] = useState("root");
  const [results, setResults] = useState(null);
  const chatAreaRef = useRef(null);

  // ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢å†…éƒ¨ã ã‘ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆãƒšãƒ¼ã‚¸å…¨ä½“ã¯å‹•ã‹ã•ãªã„ï¼‰
  useEffect(() => {
    if (chatAreaRef.current) {
      chatAreaRef.current.scrollTop = chatAreaRef.current.scrollHeight;
    }
  }, [history, results]);

  const currentNode = NAVI_TREE[currentKey];

  const searchArticles = (tags) => {
    return articles.map(article => {
      const aTags = article.tags || [];
      let score = 0;
      tags.forEach(tag => { if (aTags.includes(tag)) score += 2; });
      return { article, score };
    })
    .filter(s => s.score > 0)
    .sort((a, b) => b.score - a.score)
    .slice(0, 5);
  };

  const handleSelect = (option) => {
    setHistory(prev => [...prev, { botMessage: currentNode.message, userChoice: option.label }]);
    if (option.next) {
      setCurrentKey(option.next);
    } else {
      setResults(searchArticles(option.tags));
    }
  };

  const restart = () => { setHistory([]); setCurrentKey("root"); setResults(null); };
  const close = () => { setIsOpen(false); restart(); };

  const font = "'Zen Kaku Gothic New', sans-serif";

  // â”€â”€ é–‰ã˜ãŸçŠ¶æ…‹ï¼šå¤§ãã‚ã®ç›®ç«‹ã¤ãƒãƒŠãƒ¼ â”€â”€
  if (!isOpen) {
    return (
      <div style={{ maxWidth: 960, margin: "0 auto", padding: "18px 20px 0" }}>
        <button onClick={() => setIsOpen(true)} style={{
          width: "100%", padding: "20px 24px",
          background: "linear-gradient(135deg, #EA580C 0%, #F97316 50%, #FB923C 100%)",
          border: "none", borderRadius: 16, cursor: "pointer",
          display: "flex", alignItems: "center", gap: 14,
          fontFamily: font, transition: "all 0.25s ease",
          boxShadow: "0 4px 20px rgba(249,115,22,0.3)",
        }}
        onMouseEnter={e => { e.currentTarget.style.transform = "translateY(-2px)"; e.currentTarget.style.boxShadow = "0 8px 28px rgba(249,115,22,0.4)"; }}
        onMouseLeave={e => { e.currentTarget.style.transform = "translateY(0)"; e.currentTarget.style.boxShadow = "0 4px 20px rgba(249,115,22,0.3)"; }}
        >
          <span style={{ fontSize: 32, lineHeight: 1 }}>ğŸ§­</span>
          <div style={{ textAlign: "left", flex: 1 }}>
            <div style={{ fontSize: 16, fontWeight: 900, color: "#FFF", letterSpacing: "0.02em" }}>æ¢ç©¶ãƒŠãƒ“</div>
            <div style={{ fontSize: 12, color: "rgba(255,255,255,0.85)", marginTop: 3 }}>æ°—ã«ãªã‚‹ãƒ†ãƒ¼ãƒã‚’é¸ã¶ã ã‘ã€‚ã‚ãªãŸã«ã´ã£ãŸã‚Šã®è¨˜äº‹ã‚’è¦‹ã¤ã‘ã¾ã™</div>
          </div>
          <div style={{
            background: "rgba(255,255,255,0.25)", borderRadius: 12,
            padding: "8px 16px", fontSize: 13, fontWeight: 700, color: "#FFF",
            whiteSpace: "nowrap",
          }}>å§‹ã‚ã‚‹ â†’</div>
        </button>
      </div>
    );
  }

  // â”€â”€ é–‹ã„ãŸçŠ¶æ…‹ï¼šãƒãƒ£ãƒƒãƒˆUI â”€â”€
  return (
    <div style={{ maxWidth: 960, margin: "0 auto", padding: "18px 20px 0" }}>
      <div style={{
        background: "#FFF", border: "2px solid #F97316",
        borderRadius: 18, overflow: "hidden",
        boxShadow: "0 6px 28px rgba(249,115,22,0.15)",
      }}>
        {/* Header */}
        <div style={{
          padding: "14px 18px",
          background: "linear-gradient(135deg, #EA580C 0%, #F97316 100%)",
          display: "flex", alignItems: "center", justifyContent: "space-between",
        }}>
          <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
            <span style={{ fontSize: 22 }}>ğŸ§­</span>
            <div>
              <span style={{ fontFamily: font, fontSize: 15, fontWeight: 900, color: "#FFF" }}>æ¢ç©¶ãƒŠãƒ“</span>
              <span style={{ fontFamily: font, fontSize: 11, color: "rgba(255,255,255,0.7)", marginLeft: 8 }}>3ã¤ã®è³ªå•ã§ã‚ãªãŸã«ã´ã£ãŸã‚Šã®è¨˜äº‹ã‚’</span>
            </div>
          </div>
          <button onClick={close} style={{
            background: "rgba(255,255,255,0.2)", border: "none",
            borderRadius: 10, padding: "6px 14px", cursor: "pointer",
            fontFamily: font, fontSize: 12, fontWeight: 600, color: "#FFF",
          }}>âœ• é–‰ã˜ã‚‹</button>
        </div>

        {/* Chat area - ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã¯ã“ã“ã ã‘ */}
        <div ref={chatAreaRef} style={{
          padding: "18px", maxHeight: 400, overflowY: "auto",
          background: "#FEFCF9",
        }}>
          {/* History */}
          {history.map((h, i) => (
            <div key={i}>
              <div style={{ display: "flex", gap: 10, marginBottom: 10 }}>
                <div style={{
                  width: 32, height: 32, borderRadius: "50%",
                  background: "linear-gradient(135deg, #EA580C, #F97316)",
                  display: "flex", alignItems: "center", justifyContent: "center",
                  fontSize: 16, flexShrink: 0,
                }}>ğŸ§­</div>
                <div style={{
                  background: "#FFF7ED", border: "1px solid #FDE6CC",
                  borderRadius: "4px 16px 16px 16px", padding: "10px 16px",
                  fontFamily: font, fontSize: 14, color: "#1A1207", lineHeight: 1.6,
                  maxWidth: "80%",
                }}>{h.botMessage}</div>
              </div>
              <div style={{ display: "flex", justifyContent: "flex-end", marginBottom: 16 }}>
                <div style={{
                  background: "#1A1207", color: "#FFF",
                  borderRadius: "16px 4px 16px 16px", padding: "9px 18px",
                  fontFamily: font, fontSize: 14, fontWeight: 600, maxWidth: "80%",
                }}>{h.userChoice}</div>
              </div>
            </div>
          ))}

          {/* Current step - 3æŠãƒœã‚¿ãƒ³ */}
          {!results && currentNode && (
            <div>
              <div style={{ display: "flex", gap: 10, marginBottom: 14 }}>
                <div style={{
                  width: 32, height: 32, borderRadius: "50%",
                  background: "linear-gradient(135deg, #EA580C, #F97316)",
                  display: "flex", alignItems: "center", justifyContent: "center",
                  fontSize: 16, flexShrink: 0,
                }}>ğŸ§­</div>
                <div style={{
                  background: "#FFF7ED", border: "1px solid #FDE6CC",
                  borderRadius: "4px 16px 16px 16px", padding: "10px 16px",
                  fontFamily: font, fontSize: 14, color: "#1A1207", lineHeight: 1.6,
                  maxWidth: "80%",
                }}>{currentNode.message}</div>
              </div>
              <div style={{
                display: "flex", flexDirection: "column", gap: 6,
                paddingLeft: 42,
              }}>
                {currentNode.options.map((opt, j) => (
                  <button key={j} onClick={() => handleSelect(opt)} style={{
                    padding: "12px 18px", borderRadius: 12,
                    border: "2px solid #E8E0D4",
                    background: "#FFF", cursor: "pointer",
                    fontFamily: font, fontSize: 13, fontWeight: 700,
                    color: "#1A1207", transition: "all 0.15s ease",
                    textAlign: "left",
                  }}
                  onMouseEnter={e => { e.currentTarget.style.background = "#FFF7ED"; e.currentTarget.style.borderColor = "#F97316"; e.currentTarget.style.color = "#EA580C"; e.currentTarget.style.transform = "translateX(4px)"; }}
                  onMouseLeave={e => { e.currentTarget.style.background = "#FFF"; e.currentTarget.style.borderColor = "#E8E0D4"; e.currentTarget.style.color = "#1A1207"; e.currentTarget.style.transform = "translateX(0)"; }}
                  >{opt.label}</button>
                ))}
              </div>
            </div>
          )}

          {/* Results */}
          {results && (
            <div>
              <div style={{ display: "flex", gap: 10, marginBottom: 14 }}>
                <div style={{
                  width: 32, height: 32, borderRadius: "50%",
                  background: "linear-gradient(135deg, #EA580C, #F97316)",
                  display: "flex", alignItems: "center", justifyContent: "center",
                  fontSize: 16, flexShrink: 0,
                }}>ğŸ§­</div>
                <div style={{
                  background: "#FFF7ED", border: "1px solid #FDE6CC",
                  borderRadius: "4px 16px 16px 16px", padding: "10px 16px",
                  fontFamily: font, fontSize: 14, color: "#1A1207", lineHeight: 1.6,
                  maxWidth: "80%",
                }}>
                  {results.length > 0
                    ? `ãŠã™ã™ã‚ã®è¨˜äº‹ãŒ${results.length}ä»¶è¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼`
                    : "ã”ã‚ã‚“ãªã•ã„ã€è©²å½“ã™ã‚‹è¨˜äº‹ãŒã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚ä»–ã®ãƒ†ãƒ¼ãƒã‚‚è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚"
                  }
                </div>
              </div>

              {results.length > 0 && (
                <div style={{ paddingLeft: 42, display: "flex", flexDirection: "column", gap: 8, marginBottom: 14 }}>
                  {results.map(({ article }, k) => {
                    const color = CATEGORY_COLORS[article.category] || "#6B5D4A";
                    const catLabel = CATEGORY_LABELS[article.category] || "";
                    return (
                      <div key={article.id} onClick={() => { onSelectArticle(article); close(); }}
                        style={{
                          background: "#FFF", border: "1px solid #E8E0D4",
                          borderRadius: 12, padding: "14px 16px", cursor: "pointer",
                          transition: "all 0.2s ease",
                          animation: `fadeSlideUp 0.3s ease ${k * 0.08}s both`,
                        }}
                        onMouseEnter={e => { e.currentTarget.style.borderColor = color; e.currentTarget.style.boxShadow = `0 3px 14px ${color}22`; e.currentTarget.style.transform = "translateX(4px)"; }}
                        onMouseLeave={e => { e.currentTarget.style.borderColor = "#E8E0D4"; e.currentTarget.style.boxShadow = "none"; e.currentTarget.style.transform = "translateX(0)"; }}
                      >
                        <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 5 }}>
                          <span style={{
                            padding: "2px 10px", borderRadius: 10,
                            background: `${color}15`, color,
                            fontFamily: font, fontSize: 11, fontWeight: 700,
                          }}>{catLabel}</span>
                          <span style={{ fontFamily: font, fontSize: 11, color: "#A0947E" }}>{article.date}</span>
                        </div>
                        <div style={{
                          fontFamily: font, fontSize: 14, fontWeight: 700,
                          color: "#1A1207", lineHeight: 1.5,
                        }}>
                          <span style={{ marginRight: 6 }}>{article.heroEmoji}</span>
                          {article.title}
                        </div>
                      </div>
                    );
                  })}
                </div>
              )}

              <div style={{ paddingLeft: 42, display: "flex", gap: 10 }}>
                <button onClick={restart} style={{
                  padding: "12px 20px", borderRadius: 12,
                  border: "2px solid #F97316", background: "#FFF",
                  cursor: "pointer", fontFamily: font, fontSize: 13, fontWeight: 700,
                  color: "#F97316", transition: "all 0.15s ease",
                }}
                onMouseEnter={e => { e.currentTarget.style.background = "#FFF7ED"; }}
                onMouseLeave={e => { e.currentTarget.style.background = "#FFF"; }}
                >ğŸ”„ æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
                <button onClick={close} style={{
                  padding: "12px 20px", borderRadius: 12,
                  border: "1px solid #E8E0D4", background: "#FFF",
                  cursor: "pointer", fontFamily: font, fontSize: 13, fontWeight: 600,
                  color: "#8B7355", transition: "all 0.15s ease",
                }}
                onMouseEnter={e => { e.currentTarget.style.background = "#F5F0E8"; }}
                onMouseLeave={e => { e.currentTarget.style.background = "#FFF"; }}
                >é–‰ã˜ã‚‹</button>
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  );
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// ğŸš€ ãƒ¡ã‚¤ãƒ³App
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

function App() {
  const [mode, setMode] = useState("site"); // "site" | "dashboard"
  const [allArticles, setAllArticles] = useState([]);
  const [loading, setLoading] = useState(true);
  const [category, setCategory] = useState("all");
  const [dateFilter, setDateFilter] = useState("all");
  const [selectedArticle, setSelectedArticle] = useState(null);
  const [tagFilter, setTagFilter] = useState(null);
  const [dashAuth, setDashAuth] = useState(false);
  const [dashPw, setDashPw] = useState("");
  const [dashPwErr, setDashPwErr] = useState(false);
  const DASH_PW = "trail2026";

  // ã‚µã‚¤ãƒˆè¡¨ç¤ºç”¨ï¼šéå…¬é–‹(hidden)ã¨äºˆç´„æŠ•ç¨¿(publishDateæœªæ¥)ã‚’é™¤å¤–
  const today = new Date().toISOString().slice(0, 10);
  const articles = allArticles.filter(a =>
    !a.hidden && (!a.publishDate || a.publishDate <= today)
  );

  useEffect(() => {
    fetch("./articles.json")
      .then(r => r.json())
      .then(data => {
        setAllArticles(data);
        setLoading(false);
      })
      .catch(() => {
        if (typeof ARTICLES !== "undefined") {
          setAllArticles(ARTICLES);
        }
        setLoading(false);
      });
  }, []);

  // OGPæ›´æ–°
  useEffect(() => { updateOGP(selectedArticle); }, [selectedArticle]);

  const handleDashLogin = () => {
    if (dashPw === DASH_PW) { setDashAuth(true); setDashPwErr(false); setMode("dashboard"); }
    else { setDashPwErr(true); }
  };

  const filteredArticles = articles.filter(a => {
    if (category !== "all" && a.category !== category) return false;
    if (dateFilter !== "all" && a.dateKey !== dateFilter) return false;
    if (tagFilter && (!a.tags || !a.tags.includes(tagFilter))) return false;
    return true;
  });

  const handleTagClick = (tag) => {
    setTagFilter(tag);
    setSelectedArticle(null);
    setCategory("all");
    setDateFilter("all");
  };

  const handleUpdateArticle = (updated) => {
    setAllArticles(prev => prev.map(a => a.id === updated.id ? updated : a));
  };

  if (loading) {
    return (
      <div style={{ background: "#FFFCF7", minHeight: "100vh", display: "flex", alignItems: "center", justifyContent: "center" }}>
        <div style={{ textAlign: "center", fontFamily: "'Zen Kaku Gothic New', sans-serif" }}>
          <div style={{ fontSize: 48, marginBottom: 16 }}>ğŸ”</div>
          <div style={{ fontSize: 14, color: "#6B5D4A" }}>è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
        </div>
      </div>
    );
  }

  return (
    <div style={{ background: "#FFFCF7", minHeight: "100vh" }}>
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400;500;700;900&display=swap');
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background: #FFFCF7; }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: #D4C5AE; border-radius: 3px; }
        @keyframes fadeSlideUp {
          from { opacity: 0; transform: translateY(16px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn {
          from { opacity: 0; } to { opacity: 1; }
        }
        @keyframes calendarSlideIn {
          from { opacity: 0; transform: translateY(-8px) scale(0.96); }
          to { opacity: 1; transform: translateY(0) scale(1); }
        }
        @keyframes pulse {
          0%, 100% { opacity: 1; } 50% { opacity: 0.4; }
        }
        @media (max-width: 768px) {
          .main-grid { grid-template-columns: 1fr !important; }
          .editor-grid { grid-template-columns: 1fr !important; }
        }
        textarea:focus, input:focus, select:focus { border-color: #F97316 !important; }
      `}</style>

      {/* Mode toggle bar */}
      <div style={{
        background: "#1A1207", padding: "0 20px",
        display: "flex", alignItems: "center", justifyContent: "center", gap: 4,
      }}>
        {[
          { id: "site", label: "ğŸŒ å…¬é–‹ã‚µã‚¤ãƒˆ" },
          { id: "dashboard", label: "ğŸ“‹ ç·¨é›†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰" },
        ].map(m => (
          <button key={m.id} onClick={() => {
            if (m.id === "dashboard" && !dashAuth) { setMode("login"); setSelectedArticle(null); }
            else { setMode(m.id); setSelectedArticle(null); }
          }} style={{
            padding: "10px 20px", border: "none", cursor: "pointer",
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
            fontSize: 12, fontWeight: mode === m.id ? 700 : 500,
            background: mode === m.id ? "#FFFCF7" : "transparent",
            color: mode === m.id ? "#1A1207" : "#8B7355",
            borderRadius: "8px 8px 0 0", marginTop: 4,
            transition: "all 0.2s ease",
          }}>{m.label}</button>
        ))}
      </div>

      {mode === "login" ? (
        <div style={{ maxWidth: 400, margin: "80px auto", padding: "40px 24px", textAlign: "center",
          fontFamily: "'Zen Kaku Gothic New', sans-serif" }}>
          <div style={{ fontSize: 48, marginBottom: 16 }}>ğŸ”’</div>
          <div style={{ fontSize: 18, fontWeight: 700, color: "#1A1207", marginBottom: 8 }}>
            ç·¨é›†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
          </div>
          <div style={{ fontSize: 13, color: "#8B7355", marginBottom: 24 }}>
            ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
          </div>
          <input
            type="password" value={dashPw}
            onChange={e => { setDashPw(e.target.value); setDashPwErr(false); }}
            onKeyDown={e => e.key === "Enter" && handleDashLogin()}
            placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"
            style={{
              width: "100%", padding: "12px 16px", fontSize: 15,
              border: dashPwErr ? "2px solid #E8453C" : "2px solid #E8E0D4",
              borderRadius: 10, outline: "none", marginBottom: 8,
              fontFamily: "'Zen Kaku Gothic New', sans-serif",
              background: "#FFFCF7",
            }}
          />
          {dashPwErr && (
            <div style={{ fontSize: 13, color: "#E8453C", marginBottom: 8 }}>
              ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™
            </div>
          )}
          <button onClick={handleDashLogin} style={{
            width: "100%", padding: "12px 0", fontSize: 15, fontWeight: 700,
            background: "#F97316", color: "#FFF", border: "none",
            borderRadius: 10, cursor: "pointer", marginTop: 8,
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
          }}>ãƒ­ã‚°ã‚¤ãƒ³</button>
          <button onClick={() => setMode("site")} style={{
            marginTop: 12, background: "none", border: "none",
            color: "#8B7355", fontSize: 13, cursor: "pointer",
            fontFamily: "'Zen Kaku Gothic New', sans-serif",
          }}>â† ã‚µã‚¤ãƒˆã«æˆ»ã‚‹</button>
        </div>
      ) : mode === "dashboard" ? (
        <div style={{ maxWidth: 1100, margin: "0 auto", padding: "28px 20px" }}>
          <Dashboard articles={allArticles} onUpdateArticle={handleUpdateArticle} />
        </div>
      ) : (
        <>
          <Header
            onNav={(c) => { setCategory(c); setSelectedArticle(null); }}
            currentCategory={category}
            currentDate={dateFilter}
            onDateChange={(d) => { setDateFilter(d); setSelectedArticle(null); }}
            articles={articles}
          />

          {!selectedArticle && <HeroSection />}
          {!selectedArticle && <TankyuNavi articles={articles} onSelectArticle={setSelectedArticle} />}

          <main style={{ maxWidth: 960, margin: "0 auto", padding: "28px 20px 0" }}>
            <div className="main-grid" style={{
              display: "grid",
              gridTemplateColumns: selectedArticle ? "1fr" : "1fr 280px",
              gap: 24, alignItems: "start",
            }}>
              <div>
                {selectedArticle ? (
                  <ArticleDetail article={selectedArticle} onBack={() => setSelectedArticle(null)} showComments={true} articles={articles} onSelect={setSelectedArticle} onTagClick={handleTagClick} />
                ) : (
                  <>
                    <div style={{
                      fontFamily: "'Zen Kaku Gothic New', sans-serif",
                      fontSize: 12, fontWeight: 700, color: "#8B7355",
                      marginBottom: 14, letterSpacing: "0.05em",
                    }}>
                      {tagFilter ? `ğŸ· #${tagFilter}` : category === "all" ? "ğŸ“° æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹" : NAV_CATEGORIES.find(c => c.id === category)?.icon + " " + NAV_CATEGORIES.find(c => c.id === category)?.label}
                      {dateFilter !== "all" && ` â€” ${DATE_TABS.find(d => d.key === dateFilter)?.label}`}
                      <span style={{ fontWeight: 400, marginLeft: 8 }}>{filteredArticles.length}ä»¶</span>
                      {tagFilter && (
                        <button onClick={() => setTagFilter(null)} style={{
                          marginLeft: 8, padding: "2px 10px", borderRadius: 10,
                          border: "1px solid #D4C5AE", background: "#FFFCF7",
                          cursor: "pointer", fontFamily: "'Zen Kaku Gothic New', sans-serif",
                          fontSize: 10, fontWeight: 600, color: "#8B7355",
                        }}>Ã— è§£é™¤</button>
                      )}
                    </div>
                    <div style={{ display: "flex", flexDirection: "column", gap: 14 }}>
                      {filteredArticles.map((article, i) => (
                        <ArticleCard key={article.id} article={article} onSelect={setSelectedArticle} index={i} onTagClick={handleTagClick} />
                      ))}
                      {filteredArticles.length === 0 && (
                        <div style={{
                          textAlign: "center", padding: "50px 20px",
                          fontFamily: "'Zen Kaku Gothic New', sans-serif", color: "#A0947E",
                        }}>
                          <div style={{ fontSize: 40, marginBottom: 10 }}>ğŸ“­</div>
                          ã“ã®æ¡ä»¶ã®è¨˜äº‹ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“
                        </div>
                      )}
                    </div>
                  </>
                )}
              </div>
              {!selectedArticle && <Sidebar articles={articles} />}
            </div>
          </main>
          <Footer />
        </>
      )}
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(React.createElement(App));
  </script>
</body>
</html>
